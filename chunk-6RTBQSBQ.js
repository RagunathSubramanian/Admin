import{a as se,b as he,c as le,d as ge}from"./chunk-TPTFHVLD.js";import{a as ie,b as me,c as oe,d as ce}from"./chunk-IH4XG7TN.js";import"./chunk-OCP6ILJ3.js";import"./chunk-OKMSR2WX.js";import"./chunk-ZMABTEAI.js";import"./chunk-4QDCLFOO.js";import{c as ae,d as de}from"./chunk-NI4BJD2M.js";import{$ as F,A as $,Ba as l,Bb as b,Cb as y,Db as N,Eb as J,K as ue,Ka as q,Lb as h,Mb as Q,Oa as A,Ob as X,T as H,Ua as O,Va as f,Xa as Y,Zb as K,_a as w,_b as ee,aa as B,ab as T,ac as te,ba as E,bb as _,bc as re,ca as k,cb as a,db as i,eb as x,ga as G,hb as I,hc as ne,ib as S,jb as D,oa as v,rb as p,sb as L,tb as c,ub as Z}from"./chunk-VUHZN6IL.js";import{a as U,b as j,d as pe}from"./chunk-3A3XYTID.js";function De(u,m){u&1&&(a(0,"div",3),p(1," Loading dashboard data\u2026 "),i())}function fe(u,m){if(u&1&&(a(0,"div",4),p(1),i()),u&2){let e=D();l(),c(" ",e.error()," ")}}function ve(u,m){if(u&1){let e=I();a(0,"button",58),S("click",function(){let t=F(e).$implicit,n=D();return B(n.setRange(t.value))}),p(1),i()}if(u&2){let e=m.$implicit,r=D();Y("bg-primary-600",r.performanceRange()===e.value)("text-white",r.performanceRange()===e.value)("border-primary-600",r.performanceRange()===e.value)("border-gray-200",r.performanceRange()!==e.value)("text-gray-600",r.performanceRange()!==e.value),l(),c(" ",e.label," ")}}function Ce(u,m){if(u&1&&(a(0,"div",39)(1,"div")(2,"p",59),p(3),i(),a(4,"p",40),p(5),i()(),a(6,"div",60)(7,"div")(8,"p",61),p(9,"Drop Count"),i(),a(10,"p",62),p(11),b(12,"number"),i()(),a(13,"div")(14,"p",61),p(15,"Avg / Shift"),i(),a(16,"p",62),p(17),b(18,"number"),i()()(),a(19,"p",63),p(20),b(21,"date"),i()()),u&2){let e,r,t,n,o,s=D();l(3),L((e=s.topPerformer())==null?null:e.name),l(2),c(" ",!((r=s.topPerformer())==null||r.shifts==null)&&r.shifts.length?(r=s.topPerformer())==null||r.shifts==null?null:r.shifts.join(", "):"N/A"," "),l(6),c(" ",y(12,5,(t=s.topPerformer())==null?null:t.totalDrops)," "),l(6),c(" ",N(18,7,(n=s.topPerformer())==null?null:n.averageDrops,"1.0-1")," "),l(3),c(" Latest activity: ",!((o=s.topPerformer())==null||o.latest==null)&&o.latest.Timestamp?N(21,10,(o=s.topPerformer())==null||o.latest==null?null:o.latest.Timestamp,"medium"):"N/A"," ")}}function xe(u,m){u&1&&(a(0,"p",40),p(1,"No performance data available."),i())}function Se(u,m){if(u&1&&(a(0,"div",64)(1,"div",13)(2,"div")(3,"p",65),p(4),i(),a(5,"p",66),p(6),i()(),a(7,"span",67),p(8),b(9,"number"),i()(),a(10,"p",68),p(11),b(12,"number"),i()()),u&2){let e=m.$implicit;l(4),L(e.name),l(2),c(" Shifts: ",e.shifts.join(", ")||"N/A"," "),l(2),c(" ",N(9,4,e.averageDrops,"1.0-1")," avg "),l(3),c(" Drop count: ",y(12,7,e.totalDrops)," ")}}function Te(u,m){if(u&1&&(a(0,"div",42),T(1,Se,13,9,"div",64,ye),i()),u&2){let e=D();l(),_(e.underperformingEmployees())}}function _e(u,m){u&1&&(a(0,"p",40),p(1,"All employees are meeting the target."),i())}function Ee(u,m){u&1&&p(0," \u2191 ")}function ke(u,m){u&1&&p(0," \u2193 ")}function we(u,m){u&1&&p(0," \u21C5 ")}function Ae(u,m){if(u&1){let e=I();a(0,"th",53)(1,"button",69),S("click",function(){let t=F(e).$implicit,n=D();return B(n.toggleSort(t.key))}),a(2,"span"),p(3),i(),a(4,"span",70),A(5,Ee,1,0)(6,ke,1,0)(7,we,1,0),i()()()}if(u&2){let e=m.$implicit,r=D();l(3),L(e.label),l(2),w(r.getSortDirection(e.key)==="asc"?5:r.getSortDirection(e.key)==="desc"?6:7)}}function Ne(u,m){if(u&1){let e=I();a(0,"th",55)(1,"input",71),S("input",function(t){let n,o=F(e).$implicit,s=D();return B(s.updateFilter(o.key,(n=t.target==null?null:t.target.value)!==null&&n!==void 0?n:""))}),i()()}if(u&2){let e=m.$implicit,r=D();l(),f("value",r.getFilterValue(e.key))("placeholder","Filter "+e.label),O("type",e.type==="number"?"number":e.type==="date"?"date":"text")}}function Re(u,m){if(u&1&&(a(0,"td",72),p(1),i()),u&2){let e=m.$implicit,r=D().$implicit,t=D();l(),c(" ",t.formatCellValue(r,e)," ")}}function Me(u,m){if(u&1&&(a(0,"tr",57),T(1,Re,2,1,"td",72,V),i()),u&2){let e=D();l(),_(e.tableColumns)}}function Fe(u,m){if(u&1&&(a(0,"tr")(1,"td",73),p(2," No records match the current filters. "),i()()),u&2){let e=D();l(),O("colspan",e.tableColumns.length)}}var be,V,ye,Ge,Be=pe(()=>{X();ne();de();me();ce();he();ue();ge();X();ne();be=(u,m)=>m.value,V=(u,m)=>m.key,ye=(u,m)=>m.name;Ge=(()=>{class u{dashboardService=H(le);destroyRef=H(G);isLoading=v(!1);error=v(null);dashboardData=v([]);underperformerThreshold=80;tableColumns=[{key:"Timestamp",label:"Timestamp",type:"text"},{key:"NAME",label:"Name",type:"text"},{key:"Shift",label:"Shift",type:"text"},{key:"Total Drops",label:"Total Drops",type:"number",numeric:!0},{key:"Multi Drops",label:"Multi Drops",type:"number",numeric:!0},{key:"Heavy Drops",label:"Heavy Drops",type:"number",numeric:!0},{key:"Walkup Drop Count",label:"Walkup Drops",type:"number",numeric:!0},{key:"Double Drop Count",label:"Double Drops",type:"number",numeric:!0},{key:"Amount",label:"Amount",type:"number",numeric:!0}];tableFilters=v(this.tableColumns.reduce((e,r)=>(e[r.key]="",e),{}));sortState=v(null);filteredTableData=h(()=>{let e=this.tableFilters(),r=this.sortState(),n=this.filteredRecords().filter(s=>this.tableColumns.every(d=>{let g=e[d.key];if(!g)return!0;let C=s[d.key];if(C==null)return!1;if(d.type==="number"){let M=Number(g);return Number.isNaN(M)?!0:Number(C)===M}return String(C).toLowerCase().includes(g.toLowerCase())}));if(!r)return n;let o=this.tableColumns.find(s=>s.key===r.key);return[...n].sort((s,d)=>{let g=s[r.key],C=d[r.key];if(o?.numeric){let W=this.ensureNumber(g),z=this.ensureNumber(C);return r.direction==="asc"?W-z:z-W}let R=String(g??""),M=String(C??""),P=R.localeCompare(M,void 0,{sensitivity:"base",numeric:!0});return r.direction==="asc"?P:-P})});lineChartOptions={elements:{line:{tension:.5}},scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}},responsive:!0,maintainAspectRatio:!1};lineChartType="line";lineChartData=h(()=>{let e=this.filteredRecords();if(!e.length)return this.createLineChartData([],[]);let r=this.groupAndSumByDropCount(e,t=>t.Month||this.tryGetMonthFromDate(t.DATE));return this.createLineChartData(r.labels,r.values)});dailyTrendsChartData=h(()=>{let e=this.filteredRecords();if(!e.length)return this.createLineChartData([],[],"Daily Drops",{background:"rgba(34, 197, 94, 0.1)",border:"rgba(34, 197, 94, 1)"});let r=new Map;e.forEach(n=>{let o=n.DATE;if(!o)return;let s=this.parseRecordDate({DATE:o});if(!s)return;let d=s.toISOString().split("T")[0],g=r.get(d);g?g.value+=this.ensureNumber(n.DropCount):r.set(d,{date:s,value:this.ensureNumber(n.DropCount)})});let t=Array.from(r.entries()).map(([n,o])=>({label:o.date.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),value:o.value,date:o.date})).sort((n,o)=>n.date.getTime()-o.date.getTime());return this.createLineChartData(t.map(n=>n.label),t.map(n=>n.value),"Daily Drops",{background:"rgba(34, 197, 94, 0.1)",border:"rgba(34, 197, 94, 1)"})});dailyTrendsChartOptions={elements:{line:{tension:.5}},scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}},responsive:!0,maintainAspectRatio:!1};dailyTrendsChartType="line";dropsPerEmployeeChartData=h(()=>{let e=this.filteredRecords();if(!e.length)return this.createBarChartData([],[],"Drops per Employee",{background:"rgba(147, 51, 234, 0.8)",border:"rgba(147, 51, 234, 1)"});let r=this.groupAndSumByDropCount(e,t=>t.NAME?.trim()||"Unknown");return this.createBarChartData(r.labels,r.values,"Drops per Employee",{background:"rgba(147, 51, 234, 0.8)",border:"rgba(147, 51, 234, 1)"})});dropsPerEmployeeChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}};dropsPerEmployeeChartType="bar";dropTypeChartData=h(()=>{let e=this.filteredRecords();if(!e.length)return this.createPieChartData([],[]);let r=[{label:"Multi Drops",value:this.sumNumeric(e,"Multi Drops")},{label:"Heavy Drops",value:this.sumNumeric(e,"Heavy Drops")},{label:"Walkup Drops",value:this.sumNumeric(e,"Walkup Drop Count")},{label:"Double Drops",value:this.sumNumeric(e,"Double Drop Count")},{label:"Single Drops",value:e.reduce((t,n)=>t+this.ensureNumber(n.DropCount),0)-this.sumNumeric(e,"Multi Drops")-this.sumNumeric(e,"Heavy Drops")-this.sumNumeric(e,"Double Drop Count")}];return this.createPieChartData(r.map(t=>t.label),r.map(t=>t.value),["rgba(59, 130, 246, 0.8)","rgba(126, 156, 146, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(27, 244, 172, 0.9)"])});dropTypeChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}};dropTypeChartType="pie";averageDropsTrendChartData=h(()=>{let e=this.filteredRecords();if(!e.length)return this.createLineChartData([],[],"Average Drops per Employee");let r=this.groupMonthlyAverages(e);return this.createLineChartData(r.labels,r.values,"Average Drops per Employee",{background:"rgba(34, 197, 94, 0.15)",border:"rgba(34, 197, 94, 1)"})});averageDropsTrendChartOptions;averageDropsTrendChartType="line";totalDrops=h(()=>this.filteredRecords().reduce((e,r)=>e+this.ensureNumber(r.DropCount),0));multiDrops=h(()=>this.sumNumeric(this.filteredRecords(),"Multi Drops"));heavyDrops=h(()=>this.sumNumeric(this.filteredRecords(),"Heavy Drops"));walkupDropCount=h(()=>this.sumNumeric(this.filteredRecords(),"Walkup Drop Count"));totalAmount=h(()=>this.sumNumeric(this.filteredRecords(),"Amount"));doubleDropCount=h(()=>this.sumNumeric(this.filteredRecords(),"Double Drop Count"));activeEmployee=h(()=>new Set(this.filteredRecords().map(r=>r.NAME)).size);dailyTotals=h(()=>new Set(this.filteredRecords().map(r=>r.DATE)).size);recordsCount=h(()=>this.filteredRecords().length);recentActivities=h(()=>this.filteredRecords().slice(0,5).map((r,t)=>({id:r.Timestamp||r.FIN||r["Email Address"]||`${t}`,user:r.NAME?.trim()||"Unknown driver",action:`${this.ensureNumber(r.DropCount)} drops \u2022 Shift ${r.Shift||"N/A"}`,time:this.formatTimestamp(r.Timestamp||r.DATE)})));constructor(){this.averageDropsTrendChartOptions={elements:{line:{tension:.5}},scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}},responsive:!0,maintainAspectRatio:!1},Q(()=>{let e=this.groupedData();this.groupedDataSignal.set(e)})}topPerformer=h(()=>{let e=this.filteredRecords();if(!e.length)return null;let r=Array.from(this.aggregateByEmployee(e).entries());if(!r.length)return null;let[t,n]=r.reduce((s,d)=>d[1].totalDrops>s[1].totalDrops?d:s,r[0]),o=n.count>0?n.totalDrops/n.count:0;return{name:t,totalDrops:n.totalDrops,averageDrops:o,shifts:Array.from(n.shifts),latest:n.latestRecord}});underperformingEmployees=h(()=>{let e=this.filteredRecords();if(!e.length)return[];let r=this.aggregateByEmployee(e);return Array.from(r.entries()).map(([t,n])=>{let o=n.count>0?n.totalDrops/n.count:0;return{name:t,averageDrops:o,totalDrops:n.totalDrops,shifts:Array.from(n.shifts)}}).filter(t=>t.averageDrops<this.underperformerThreshold).sort((t,n)=>t.averageDrops-n.averageDrops)});ngOnInit(){this.loadDashboardData()}loadDashboardData(e){this.isLoading.set(!0),this.error.set(null),this.dashboardService.getDashboardData(e).pipe(se(this.destroyRef),$(()=>this.isLoading.set(!1))).subscribe({next:r=>{this.dashboardData.set(r)},error:r=>{this.error.set(this.extractErrorMessage(r)),this.dashboardData.set([])}})}createLineChartData(e,r,t="Drop Count",n={background:"rgba(59, 130, 246, 0.1)",border:"rgba(59, 130, 246, 1)"}){return{datasets:[{data:r,label:t,backgroundColor:n.background,borderColor:n.border,pointBackgroundColor:n.border,pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:n.border,fill:"origin"}],labels:e}}createBarChartData(e,r,t="Walkup Drops",n={background:"rgba(59, 130, 246, 0.8)",border:"rgba(59, 130, 246, 1)"}){return{labels:e,datasets:[{data:r,label:t,backgroundColor:n.background,borderColor:n.border,borderWidth:1}]}}createPieChartData(e,r,t=[]){return{labels:e,datasets:[{data:r,backgroundColor:t.length>0?t:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:"#fff",borderWidth:1}]}}sumNumeric(e,r){return e.reduce((t,n)=>{let o=n[r],s=this.ensureNumber(o);return t+s},0)}groupAndSum(e,r,t="Total Drops"){let n=new Map;e.forEach(d=>{let g=r(d)||"Unknown",R=(n.get(g)??0)+this.ensureNumber(d[t]);n.set(g,R)});let o=Array.from(n.keys()),s=o.map(d=>n.get(d)??0);return{labels:o,values:s}}groupAndSumByDropCount(e,r){let t=new Map;e.forEach(s=>{let d=r(s)||"Unknown",C=(t.get(d)??0)+this.ensureNumber(s.DropCount);t.set(d,C)});let n=Array.from(t.keys()),o=n.map(s=>t.get(s)??0);return{labels:n,values:o}}ensureNumber(e){if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()==="")return 0;let r=Number(e);return Number.isFinite(r)?r:0}tryGetMonthFromDate(e){if(!e)return"Unknown";let r=new Date(e);return Number.isNaN(r.getTime())?e:r.toLocaleString(void 0,{month:"short",year:"numeric"})}formatTimestamp(e){if(!e)return"Unknown time";let r=new Date(e);return Number.isNaN(r.getTime())?e:r.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}extractErrorMessage(e){return e instanceof Error||e&&typeof e=="object"&&"message"in e&&typeof e.message=="string"?e.message:"Unable to load dashboard data. Please try again later."}updateFilter(e,r){this.tableFilters.update(t=>j(U({},t),{[e]:r}))}clearFilters(){this.tableFilters.set(this.tableColumns.reduce((e,r)=>(e[r.key]="",e),{}))}toggleSort(e){this.sortState.update(r=>!r||r.key!==e?{key:e,direction:"asc"}:r.direction==="asc"?{key:e,direction:"desc"}:null)}getSortDirection(e){return this.sortState()?.key===e?this.sortState().direction:null}getFilterValue(e){return this.tableFilters()[e]??""}formatCellValue(e,r){let t=e[r.key];return t==null?"\u2014":r.key==="Amount"?new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",maximumFractionDigits:0}).format(this.ensureNumber(t)):r.key==="Timestamp"?this.formatTimestamp(String(t)):String(t)}trackByRecord=(e,r)=>r.Timestamp||r.FIN||e;groupMonthlyAverages(e){let r=new Map;e.forEach(o=>{let d=o.Month||this.tryGetMonthFromDate(o.DATE)||"Unknown",g=r.get(d)??{totalDrops:0,employees:new Set};g.totalDrops+=this.ensureNumber(o.DropCount),g.employees.add(o.NAME?.trim()||"Unknown"),r.set(d,g)});let t=Array.from(r.keys()),n=t.map(o=>{let s=r.get(o);if(!s)return 0;let d=s.employees.size||1;return s.totalDrops/d});return{labels:t,values:n}}aggregateByEmployee(e){let r=new Map;return e.forEach(t=>{let n=t.NAME?.trim()||"Unknown",o=r.get(n)??{totalDrops:0,multiDrops:0,heavyDrops:0,walkupDrops:0,amount:0,count:0,shifts:new Set,latestRecord:t};o.totalDrops+=this.ensureNumber(t.DropCount),o.multiDrops+=this.ensureNumber(t["Multi Drops"]),o.heavyDrops+=this.ensureNumber(t["Heavy Drops"]),o.walkupDrops+=this.ensureNumber(t["Walkup Drop Count"]),o.amount+=this.ensureNumber(t.Amount),o.count+=1,t.Shift&&o.shifts.add(t.Shift),o.latestRecord=t,r.set(n,o)}),r}performanceRange=v("month");customStart=v(null);customEnd=v(null);rangeOptions=[{label:"Today",value:"today"},{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"This Year",value:"year"}];filteredRecords=h(()=>{let e=this.dashboardData(),r=this.performanceRange(),t=this.customStart(),n=this.customEnd(),{startDate:o,endDate:s}=this.getRangeBounds(r,t,n);return!o&&!s?e:e.filter(d=>{let g=this.parseRecordDate(d);return!(!g||o&&g<o||s&&g>s)})});getRangeBounds(e,r,t){let n=new Date,o=new Date(n.getFullYear(),n.getMonth(),n.getDate());switch(e){case"today":return{startDate:o,endDate:new Date(o.getTime()+24*60*60*1e3-1)};case"week":{let s=new Date(o);return s.setDate(s.getDate()-6),{startDate:s,endDate:n}}case"month":return{startDate:new Date(n.getFullYear(),n.getMonth(),1),endDate:n};case"year":return{startDate:new Date(n.getFullYear(),0,1),endDate:n};case"custom":{let s=r?new Date(new Date(r).setHours(0,0,0,0)):null,d=t?new Date(new Date(t).setHours(0,0,0,0)):null;return{startDate:s,endDate:d}}default:return{startDate:null,endDate:null}}}parseRecordDate(e){let r=e.DATE||e.Timestamp;if(!r)return null;let t=new Date(r);return Number.isNaN(t.getTime())?null:t}applyCustomRange(){this.isCustomRangeValid()&&this.performanceRange.set("custom")}isCustomRangeValid=h(()=>{let e=this.customStart(),r=this.customEnd();if(!e||!r)return!1;let t=new Date(e),n=new Date(r);return t<=n});setRange(e){this.performanceRange.set(e),e!=="custom"&&(this.customStart.set(null),this.customEnd.set(null))}updateCustomStart(e){this.customStart.set(e||null)}updateCustomEnd(e){this.customEnd.set(e||null)}groupedData=h(()=>{let e=this.filteredRecords(),r=new Map;return e.forEach(n=>{let o=n.DATE||"Unknown",s=o,d=r.get(s);d?(d["Total Drops"]+=this.ensureNumber(n["Total Drops"]),d["Multi Drops"]+=this.ensureNumber(n["Multi Drops"]),d["Heavy Drops"]+=this.ensureNumber(n["Heavy Drops"]),d["Walkup Drop Count"]+=this.ensureNumber(n["Walkup Drop Count"]),d["Double Drop Count"]+=this.ensureNumber(n["Double Drop Count"]),d.Amount+=this.ensureNumber(n.Amount),d.DropCount+=this.ensureNumber(n.DropCount)):r.set(s,{DATE:o,"Total Drops":this.ensureNumber(n["Total Drops"]),"Multi Drops":this.ensureNumber(n["Multi Drops"]),"Heavy Drops":this.ensureNumber(n["Heavy Drops"]),"Walkup Drop Count":this.ensureNumber(n["Walkup Drop Count"]),"Double Drop Count":this.ensureNumber(n["Double Drop Count"]),Amount:this.ensureNumber(n.Amount),DropCount:this.ensureNumber(n.DropCount)})}),Array.from(r.values()).sort((n,o)=>{let s=this.parseRecordDate({DATE:n.DATE}),d=this.parseRecordDate({DATE:o.DATE});return!s&&!d?0:s?d?d.getTime()-s.getTime():-1:1})});groupedDataSignal=v([]);groupedTablePageSize=v(10);groupedTableColumns=[{key:"DATE",label:"Date",sortable:!0,filterable:!0},{key:"Total Drops",label:"Total Drops",sortable:!0,render:e=>e["Total Drops"].toLocaleString()},{key:"Multi Drops",label:"Multi Drops",sortable:!0,render:e=>e["Multi Drops"].toLocaleString()},{key:"Heavy Drops",label:"Heavy Drops",sortable:!0,render:e=>e["Heavy Drops"].toLocaleString()},{key:"Walkup Drop Count",label:"Walkup Drops",sortable:!0,render:e=>e["Walkup Drop Count"].toLocaleString()},{key:"Double Drop Count",label:"Double Drops",sortable:!0,render:e=>e["Double Drop Count"].toLocaleString()},{key:"Amount",label:"Amount",sortable:!0,render:e=>new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e.Amount)},{key:"DropCount",label:"Drop Count",sortable:!0,render:e=>e.DropCount.toLocaleString()}];static \u0275fac=function(r){return new(r||u)};static \u0275cmp=q({type:u,selectors:[["app-dashboard"]],decls:146,vars:80,consts:[[1,"space-y-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"rounded-md","border","border-primary-200","bg-primary-50","px-4","py-3","text-sm","text-primary-800"],[1,"rounded-md","border","border-red-200","bg-red-50","px-4","py-3","text-sm","text-red-700"],[1,"flex","flex-col","gap-3","lg:flex-row","lg:items-center","lg:justify-between"],[1,"flex","flex-wrap","gap-2"],["type","button",1,"rounded-full","border","px-4","py-1.5","text-sm","font-medium","transition","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"bg-primary-600","text-white","border-primary-600","border-gray-200","text-gray-600"],[1,"flex","flex-wrap","items-center","gap-2"],["type","date",1,"rounded-md","border","border-gray-300","px-3","py-1.5","text-sm","focus:border-primary-500","focus:outline-none","focus:ring-2","focus:ring-primary-200",3,"change","value"],[1,"text-sm","text-gray-400"],["type","button",1,"rounded-md","bg-primary-600","px-4","py-1.5","text-sm","font-medium","text-white","transition","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-primary-500","disabled:bg-gray-300","disabled:text-gray-500",3,"click","disabled"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-500"],[1,"mt-1","text-2xl","font-semibold","text-gray-900"],[1,"mt-1","text-xs","text-gray-500"],[1,"p-3","bg-yellow-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"],[1,"p-3","bg-primary-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-primary-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"],[1,"p-3","bg-green-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"p-3","bg-purple-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],["title","Monthly Drops","subtitle","Aggregated by month","height","256px",3,"chartData","chartOptions","chartType"],["title","Daily Drops Trends","subtitle","Drop count per day","height","256px",3,"chartData","chartOptions","chartType"],[1,"text-xl","font-semibold","text-gray-900"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-6"],["title","Drops per Employee","subtitle","Drop count by team member","height","256px",3,"chartData","chartOptions","chartType"],["title","Drop Type Distribution","subtitle","Share of drop categories","height","256px",3,"chartData","chartOptions","chartType"],["title","Average Drops per Employee","subtitle","Monthly average trend","height","256px",3,"chartData","chartOptions","chartType"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["title","Top Performer","subtitle","Highest drop count across all shifts"],[1,"space-y-2"],[1,"text-sm","text-gray-500"],["title","Underperforming Employees","padding","sm",3,"subtitle"],[1,"space-y-3"],["title","Grouped Summary","subtitle","Grouped by Date","padding","sm"],[3,"columns","data","pagination","pageSize","showToolbar","showFilters","searchable"],["title","Drop Records","subtitle","Filter each column or sort to analyse individual drop performance","padding","sm"],[1,"flex","flex-col","gap-4"],[1,"flex","flex-wrap","items-center","justify-between","gap-3"],[1,"text-sm","text-gray-600"],["type","button",1,"inline-flex","items-center","gap-2","rounded-md","border","border-gray-300","bg-white","px-3","py-1.5","text-sm","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"click"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-4","py-3","text-left","text-xs","font-semibold","uppercase","tracking-wider","text-gray-500"],[1,"bg-white"],[1,"px-4","py-2"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],["type","button",1,"rounded-full","border","px-4","py-1.5","text-sm","font-medium","transition","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"click"],[1,"text-lg","font-semibold","text-gray-900"],[1,"grid","grid-cols-2","gap-4","text-sm"],[1,"text-gray-500"],[1,"font-semibold","text-gray-900"],[1,"text-xs","text-gray-400"],[1,"rounded-md","border","border-red-100","bg-red-50","px-4","py-3"],[1,"font-semibold","text-red-700"],[1,"text-xs","text-red-500"],[1,"text-sm","font-medium","text-red-600"],[1,"mt-1","text-xs","text-red-500"],["type","button",1,"flex","items-center","gap-2","text-left","hover:text-primary-600","focus:outline-none",3,"click"],[1,"text-gray-400"],[1,"w-full","rounded-md","border","border-gray-300","px-2","py-1","text-sm","focus:border-primary-500","focus:outline-none","focus:ring-2","focus:ring-primary-200",3,"input","value","placeholder"],[1,"px-4","py-3","text-sm","text-gray-900"],[1,"px-4","py-6","text-center","text-sm","text-gray-500"]],template:function(r,t){r&1&&(a(0,"div",0)(1,"div")(2,"h1",1),p(3,"Dashboard"),i(),a(4,"p",2),p(5,"Welcome back! Here's what's happening today."),i()(),A(6,De,2,0,"div",3)(7,fe,2,1,"div",4),a(8,"div",5)(9,"div",6),T(10,ve,2,11,"button",7,be),i(),a(12,"div",8)(13,"input",9),S("change",function(o){return t.updateCustomStart((o.target==null?null:o.target.value)||"")}),i(),a(14,"span",10),p(15,"to"),i(),a(16,"input",9),S("change",function(o){return t.updateCustomEnd((o.target==null?null:o.target.value)||"")}),i(),a(17,"button",11),S("click",function(){return t.applyCustomRange()}),p(18," Apply "),i()()(),a(19,"div",12)(20,"app-card")(21,"div",13)(22,"div")(23,"p",14),p(24,"Drop Count"),i(),a(25,"p",15),p(26),b(27,"number"),i(),a(28,"p",16),p(29),b(30,"number"),i(),a(31,"p",16),p(32),b(33,"number"),i(),a(34,"p",16),p(35),b(36,"number"),i(),a(37,"p",16),p(38),b(39,"number"),i(),a(40,"p",16),p(41),b(42,"number"),i(),a(43,"p",16),p(44),b(45,"number"),i(),a(46,"p",16),p(47),b(48,"number"),i()(),a(49,"div",17),E(),a(50,"svg",18),x(51,"path",19),i()()()(),k(),a(52,"app-card")(53,"div",13)(54,"div")(55,"p",14),p(56,"Active Employees"),i(),a(57,"p",15),p(58),b(59,"number"),i()(),a(60,"div",20),E(),a(61,"svg",21),x(62,"path",22),i()()()(),k(),a(63,"app-card")(64,"div",13)(65,"div")(66,"p",14),p(67,"Total Sales"),i(),a(68,"p",15),p(69),b(70,"number"),i(),a(71,"p",16),p(72),b(73,"number"),i()(),a(74,"div",23),E(),a(75,"svg",24),x(76,"path",25),i()()()(),k(),a(77,"app-card")(78,"div",13)(79,"div")(80,"p",14),p(81,"Outstanding Invoices"),i(),a(82,"p",15),p(83),b(84,"number"),i(),a(85,"p",16),p(86),b(87,"number"),i()(),a(88,"div",17),E(),a(89,"svg",18),x(90,"path",19),i()()()(),k(),a(91,"app-card")(92,"div",13)(93,"div")(94,"p",14),p(95,"Estimated Revenue"),i(),a(96,"p",15),p(97),b(98,"currency"),i(),a(99,"p",16),p(100),i()(),a(101,"div",26),E(),a(102,"svg",27),x(103,"path",28),i()()()()(),k(),a(104,"div",29),x(105,"app-chart-wrapper",30)(106,"app-chart-wrapper",31),i(),a(107,"div",0)(108,"div")(109,"h2",32),p(110,"Operations"),i(),a(111,"p",2),p(112," Monitor drops performance across your team, spot top performers, and identify coaching opportunities. "),i()(),a(113,"div",33),x(114,"app-chart-wrapper",34)(115,"app-chart-wrapper",35)(116,"app-chart-wrapper",36),i(),a(117,"div",37)(118,"app-card",38),A(119,Ce,22,13,"div",39)(120,xe,2,0,"p",40),i(),a(121,"app-card",41),A(122,Te,3,0,"div",42)(123,_e,2,0,"p",40),i()()(),a(124,"app-card",43),x(125,"app-data-table",44),i(),a(126,"app-card",45)(127,"div",46)(128,"div",47)(129,"p",48),p(130),i(),a(131,"button",49),S("click",function(){return t.clearFilters()}),p(132," Clear filters "),i()(),a(133,"div",50)(134,"table",51)(135,"thead",52)(136,"tr"),T(137,Ae,8,2,"th",53,V),i(),a(139,"tr",54),T(140,Ne,2,3,"th",55,V),i()(),a(142,"tbody",56),T(143,Me,3,0,"tr",57,t.trackByRecord,!0,Fe,3,1,"tr"),i()()()()()()),r&2&&(l(6),w(t.isLoading()?6:-1),l(),w(t.error()?7:-1),l(3),_(t.rangeOptions),l(3),f("value",t.customStart()||""),l(3),f("value",t.customEnd()||""),l(),f("disabled",!t.isCustomRangeValid()),l(9),c(" ",y(27,48,t.totalDrops())," "),l(3),c(" Single drops: ",y(30,50,t.totalDrops()-t.multiDrops()-t.heavyDrops()-t.doubleDropCount())," "),l(3),c(" Multi drops: ",y(33,52,t.multiDrops())," "),l(3),c(" Heavy drops: ",y(36,54,t.heavyDrops())," "),l(3),c(" Walkup drops: ",y(39,56,t.walkupDropCount())," "),l(3),c(" Double drops: ",y(42,58,t.doubleDropCount())," "),l(3),c(" Avg drops/day : ",y(45,60,t.totalDrops()/t.dailyTotals())," "),l(3),c(" Day Count : ",y(48,62,t.dailyTotals())," "),l(11),c(" ",y(59,64,t.activeEmployee())," "),l(11),c(" ",y(70,66,t.totalAmount())," "),l(3),c(" Avg Sales/day : ",y(73,68,t.totalAmount()/t.dailyTotals())," "),l(11),c(" ",y(84,70,t.heavyDrops())," "),l(3),c(" Average / shift: ",N(87,72,t.recordsCount()?t.heavyDrops()/t.recordsCount():0,"1.0-1")," "),l(11),c(" ",J(98,75,t.totalAmount()-86*t.activeEmployee()*t.dailyTotals(),"SGD ","symbol","1.0-0")," "),l(3),c(" Records: ",t.recordsCount()," "),l(5),f("chartData",t.lineChartData())("chartOptions",t.lineChartOptions)("chartType",t.lineChartType),l(),f("chartData",t.dailyTrendsChartData())("chartOptions",t.dailyTrendsChartOptions)("chartType",t.dailyTrendsChartType),l(8),f("chartData",t.dropsPerEmployeeChartData())("chartOptions",t.dropsPerEmployeeChartOptions)("chartType",t.dropsPerEmployeeChartType),l(),f("chartData",t.dropTypeChartData())("chartOptions",t.dropTypeChartOptions)("chartType",t.dropTypeChartType),l(),f("chartData",t.averageDropsTrendChartData())("chartOptions",t.averageDropsTrendChartOptions)("chartType",t.averageDropsTrendChartType),l(3),w(t.topPerformer()?119:120),l(2),f("subtitle","Average drops per shift below "+t.underperformerThreshold),l(),w(t.underperformingEmployees().length?122:123),l(3),f("columns",t.groupedTableColumns)("data",t.groupedDataSignal)("pagination",!0)("pageSize",t.groupedTablePageSize)("showToolbar",!1)("showFilters",!0)("searchable",!1),l(5),Z(" Showing ",t.filteredTableData().length," of ",t.recordsCount()," records "),l(7),_(t.tableColumns),l(3),_(t.tableColumns),l(3),_(t.filteredTableData()))},dependencies:[re,ee,te,K,ae,ie,oe],encapsulation:2})}return u})()});Be();export{Ge as DashboardComponent};
