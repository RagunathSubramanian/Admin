import{a as ie,b as de,c as oe,d as ue}from"./chunk-3VHVEV36.js";import{a as ne,b as me}from"./chunk-VKGD23XU.js";import"./chunk-OCP6ILJ3.js";import"./chunk-WQPEQQJO.js";import{a as ae,b as pe}from"./chunk-BWHYGX4V.js";import"./chunk-HPUSM2II.js";import{$ as B,$a as S,A as G,Ab as g,Ba as s,Bb as y,Cb as N,Db as J,K as le,Ka as Y,Kb as b,Nb as Q,Oa as A,T as P,Ua as V,Va as D,Xa as Z,Zb as X,_a as w,_b as K,aa as F,ab as T,ac as ee,ba as E,bb as n,bc as te,ca as k,cb as o,db as C,ga as q,gb as I,hb as _,ib as f,ic as re,oa as v,qb as p,rb as O,sb as h,tb as L}from"./chunk-77XPDUDI.js";import{a as j,b as z,d as se}from"./chunk-3A3XYTID.js";function ge(l,d){l&1&&(n(0,"div",3),p(1," Loading dashboard data\u2026 "),o())}function be(l,d){if(l&1&&(n(0,"div",4),p(1),o()),l&2){let e=f();s(),h(" ",e.error()," ")}}function fe(l,d){if(l&1){let e=I();n(0,"button",56),_("click",function(){let t=B(e).$implicit,a=f();return F(a.setRange(t.value))}),p(1),o()}if(l&2){let e=d.$implicit,r=f();Z("bg-primary-600",r.performanceRange()===e.value)("text-white",r.performanceRange()===e.value)("border-primary-600",r.performanceRange()===e.value)("border-gray-200",r.performanceRange()!==e.value)("text-gray-600",r.performanceRange()!==e.value),s(),h(" ",e.label," ")}}function ye(l,d){if(l&1&&(n(0,"div",39)(1,"div")(2,"p",57),p(3),o(),n(4,"p",40),p(5),o()(),n(6,"div",58)(7,"div")(8,"p",59),p(9,"Total Drops"),o(),n(10,"p",60),p(11),g(12,"number"),o()(),n(13,"div")(14,"p",59),p(15,"Avg / Shift"),o(),n(16,"p",60),p(17),g(18,"number"),o()()(),n(19,"p",61),p(20),g(21,"date"),o()()),l&2){let e,r,t,a,i,m=f();s(3),O((e=m.topPerformer())==null?null:e.name),s(2),h(" ",!((r=m.topPerformer())==null||r.shifts==null)&&r.shifts.length?(r=m.topPerformer())==null||r.shifts==null?null:r.shifts.join(", "):"N/A"," "),s(6),h(" ",y(12,5,(t=m.topPerformer())==null?null:t.totalDrops)," "),s(6),h(" ",N(18,7,(a=m.topPerformer())==null?null:a.averageDrops,"1.0-1")," "),s(3),h(" Latest activity: ",!((i=m.topPerformer())==null||i.latest==null)&&i.latest.Timestamp?N(21,10,(i=m.topPerformer())==null||i.latest==null?null:i.latest.Timestamp,"medium"):"N/A"," ")}}function De(l,d){l&1&&(n(0,"p",40),p(1,"No performance data available."),o())}function ve(l,d){if(l&1&&(n(0,"div",62)(1,"div",13)(2,"div")(3,"p",63),p(4),o(),n(5,"p",64),p(6),o()(),n(7,"span",65),p(8),g(9,"number"),o()(),n(10,"p",66),p(11),g(12,"number"),o()()),l&2){let e=d.$implicit;s(4),O(e.name),s(2),h(" Shifts: ",e.shifts.join(", ")||"N/A"," "),s(2),h(" ",N(9,4,e.averageDrops,"1.0-1")," avg "),s(3),h(" Total drops: ",y(12,7,e.totalDrops)," ")}}function xe(l,d){if(l&1&&(n(0,"div",42),S(1,ve,13,9,"div",62,he),o()),l&2){let e=f();s(),T(e.underperformingEmployees())}}function Ce(l,d){l&1&&(n(0,"p",40),p(1,"All employees are meeting the target."),o())}function _e(l,d){l&1&&p(0," \u2191 ")}function Se(l,d){l&1&&p(0," \u2193 ")}function Te(l,d){l&1&&p(0," \u21C5 ")}function Ee(l,d){if(l&1){let e=I();n(0,"th",51)(1,"button",67),_("click",function(){let t=B(e).$implicit,a=f();return F(a.toggleSort(t.key))}),n(2,"span"),p(3),o(),n(4,"span",68),A(5,_e,1,0)(6,Se,1,0)(7,Te,1,0),o()()()}if(l&2){let e=d.$implicit,r=f();s(3),O(e.label),s(2),w(r.getSortDirection(e.key)==="asc"?5:r.getSortDirection(e.key)==="desc"?6:7)}}function ke(l,d){if(l&1){let e=I();n(0,"th",53)(1,"input",69),_("input",function(t){let a,i=B(e).$implicit,m=f();return F(m.updateFilter(i.key,(a=t.target==null?null:t.target.value)!==null&&a!==void 0?a:""))}),o()()}if(l&2){let e=d.$implicit,r=f();s(),D("value",r.getFilterValue(e.key))("placeholder","Filter "+e.label),V("type",e.type==="number"?"number":e.type==="date"?"date":"text")}}function we(l,d){if(l&1&&(n(0,"td",70),p(1),o()),l&2){let e=d.$implicit,r=f().$implicit,t=f();s(),h(" ",t.formatCellValue(r,e)," ")}}function Ae(l,d){if(l&1&&(n(0,"tr",55),S(1,we,2,1,"td",70,H),o()),l&2){let e=f();s(),T(e.tableColumns)}}function Ne(l,d){if(l&1&&(n(0,"tr")(1,"td",71),p(2," No records match the current filters. "),o()()),l&2){let e=f();s(),V("colspan",e.tableColumns.length)}}var ce,H,he,Ue,Re=se(()=>{Q();re();pe();me();de();le();ue();Q();re();ce=(l,d)=>d.value,H=(l,d)=>d.key,he=(l,d)=>d.name;Ue=(()=>{class l{dashboardService=P(oe);destroyRef=P(q);isLoading=v(!1);error=v(null);dashboardData=v([]);underperformerThreshold=80;tableColumns=[{key:"Timestamp",label:"Timestamp",type:"text"},{key:"NAME",label:"Name",type:"text"},{key:"Shift",label:"Shift",type:"text"},{key:"Total Drops",label:"Total Drops",type:"number",numeric:!0},{key:"Multi Drops",label:"Multi Drops",type:"number",numeric:!0},{key:"Heavy Drops",label:"Heavy Drops",type:"number",numeric:!0},{key:"Walkup Drop Count",label:"Walkup Drops",type:"number",numeric:!0},{key:"Double Drop Count",label:"Double Drops",type:"number",numeric:!0},{key:"Amount",label:"Amount",type:"number",numeric:!0}];tableFilters=v(this.tableColumns.reduce((e,r)=>(e[r.key]="",e),{}));sortState=v(null);filteredTableData=b(()=>{let e=this.tableFilters(),r=this.sortState(),a=this.filteredRecords().filter(m=>this.tableColumns.every(u=>{let c=e[u.key];if(!c)return!0;let x=m[u.key];if(x==null)return!1;if(u.type==="number"){let M=Number(c);return Number.isNaN(M)?!0:Number(x)===M}return String(x).toLowerCase().includes(c.toLowerCase())}));if(!r)return a;let i=this.tableColumns.find(m=>m.key===r.key);return[...a].sort((m,u)=>{let c=m[r.key],x=u[r.key];if(i?.numeric){let U=this.ensureNumber(c),$=this.ensureNumber(x);return r.direction==="asc"?U-$:$-U}let R=String(c??""),M=String(x??""),W=R.localeCompare(M,void 0,{sensitivity:"base",numeric:!0});return r.direction==="asc"?W:-W})});lineChartOptions={elements:{line:{tension:.5}},scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}},responsive:!0,maintainAspectRatio:!1};lineChartType="line";lineChartData=this.createLineChartData([],[]);barChartData=this.createBarChartData([],[]);barChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}};barChartType="bar";dropsPerEmployeeChartData=this.createBarChartData([],[],"Drops per Employee",{background:"rgba(147, 51, 234, 0.8)",border:"rgba(147, 51, 234, 1)"});dropsPerEmployeeChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}};dropsPerEmployeeChartType="bar";dropTypeChartData=this.createPieChartData([],[]);dropTypeChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}};dropTypeChartType="pie";averageDropsTrendChartData=this.createLineChartData([],[],"Average Drops per Employee");averageDropsTrendChartOptions;averageDropsTrendChartType="line";totalDrops=b(()=>this.sumNumeric(this.filteredRecords(),"Total Drops"));multiDrops=b(()=>this.sumNumeric(this.filteredRecords(),"Multi Drops"));heavyDrops=b(()=>this.sumNumeric(this.filteredRecords(),"Heavy Drops"));walkupDropCount=b(()=>this.sumNumeric(this.filteredRecords(),"Walkup Drop Count"));totalAmount=b(()=>this.sumNumeric(this.filteredRecords(),"Amount"));doubleDropCount=b(()=>this.sumNumeric(this.filteredRecords(),"Double Drop Count"));activeEmployee=b(()=>new Set(this.filteredRecords().map(r=>r.NAME)).size);dailyTotals=b(()=>new Set(this.filteredRecords().map(r=>r.DATE)).size);recordsCount=b(()=>this.filteredRecords().length);recentActivities=b(()=>this.filteredRecords().slice(0,5).map((r,t)=>({id:r.Timestamp||r.FIN||r["Email Address"]||`${t}`,user:r.NAME?.trim()||"Unknown driver",action:`${this.ensureNumber(r["Total Drops"])} drops \u2022 Shift ${r.Shift||"N/A"}`,time:this.formatTimestamp(r.Timestamp||r.DATE)})));constructor(){this.averageDropsTrendChartOptions={elements:{line:{tension:.5}},scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}},responsive:!0,maintainAspectRatio:!1}}topPerformer=b(()=>{let e=this.filteredRecords();if(!e.length)return null;let r=Array.from(this.aggregateByEmployee(e).entries());if(!r.length)return null;let[t,a]=r.reduce((m,u)=>u[1].totalDrops>m[1].totalDrops?u:m,r[0]),i=a.count>0?a.totalDrops/a.count:0;return{name:t,totalDrops:a.totalDrops,averageDrops:i,shifts:Array.from(a.shifts),latest:a.latestRecord}});underperformingEmployees=b(()=>{let e=this.filteredRecords();if(!e.length)return[];let r=this.aggregateByEmployee(e);return Array.from(r.entries()).map(([t,a])=>{let i=a.count>0?a.totalDrops/a.count:0;return{name:t,averageDrops:i,totalDrops:a.totalDrops,shifts:Array.from(a.shifts)}}).filter(t=>t.averageDrops<this.underperformerThreshold).sort((t,a)=>t.averageDrops-a.averageDrops)});ngOnInit(){this.loadDashboardData()}loadDashboardData(e){this.isLoading.set(!0),this.error.set(null),this.dashboardService.getDashboardData(e).pipe(ie(this.destroyRef),G(()=>this.isLoading.set(!1))).subscribe({next:r=>{this.dashboardData.set(this.convertSheetToJson(r)),this.updateCharts(this.dashboardData())},error:r=>{this.error.set(this.extractErrorMessage(r)),this.dashboardData.set([]),this.updateCharts([])}})}convertSheetToJson(e){let r=e&&Array.isArray(e.values)?e.values:[];if(r.length===0)return[];let t=r[0].map(i=>i?String(i).trim():"");return r.slice(1).map(i=>{let m={};return t.forEach((u,c)=>{i[c]!==void 0&&i[c]!==null&&String(i[c]).trim()!==""&&(m[u||`col_${c+1}`]=i[c]!==void 0?i[c]:"")}),m})}updateCharts(e){if(!e.length){this.lineChartData=this.createLineChartData([],[]),this.barChartData=this.createBarChartData([],[]);return}let r=this.groupAndSum(e,a=>a.Month||this.tryGetMonthFromDate(a.DATE));this.lineChartData=this.createLineChartData(r.labels,r.values);let t=this.groupAndSum(e,a=>a.Shift||"Unassigned","Walkup Drop Count");this.barChartData=this.createBarChartData(t.labels,t.values,"Walkup Drops",{background:"rgba(59, 130, 246, 0.8)",border:"rgba(59, 130, 246, 1)"}),this.updateOperationsCharts(e)}createLineChartData(e,r,t="Total Drops",a={background:"rgba(59, 130, 246, 0.1)",border:"rgba(59, 130, 246, 1)"}){return{datasets:[{data:r,label:t,backgroundColor:a.background,borderColor:a.border,pointBackgroundColor:a.border,pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:a.border,fill:"origin"}],labels:e}}createBarChartData(e,r,t="Walkup Drops",a={background:"rgba(59, 130, 246, 0.8)",border:"rgba(59, 130, 246, 1)"}){return{labels:e,datasets:[{data:r,label:t,backgroundColor:a.background,borderColor:a.border,borderWidth:1}]}}createPieChartData(e,r,t=[]){return{labels:e,datasets:[{data:r,backgroundColor:t.length>0?t:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:"#fff",borderWidth:1}]}}sumNumeric(e,r){return e.reduce((t,a)=>{let i=a[r],m=this.ensureNumber(i);return t+m},0)}groupAndSum(e,r,t="Total Drops"){let a=new Map;e.forEach(u=>{let c=r(u)||"Unknown",R=(a.get(c)??0)+this.ensureNumber(u[t]);a.set(c,R)});let i=Array.from(a.keys()),m=i.map(u=>a.get(u)??0);return{labels:i,values:m}}ensureNumber(e){if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()==="")return 0;let r=Number(e);return Number.isFinite(r)?r:0}tryGetMonthFromDate(e){if(!e)return"Unknown";let r=new Date(e);return Number.isNaN(r.getTime())?e:r.toLocaleString(void 0,{month:"short",year:"numeric"})}formatTimestamp(e){if(!e)return"Unknown time";let r=new Date(e);return Number.isNaN(r.getTime())?e:r.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}extractErrorMessage(e){return e instanceof Error||e&&typeof e=="object"&&"message"in e&&typeof e.message=="string"?e.message:"Unable to load dashboard data. Please try again later."}updateFilter(e,r){this.tableFilters.update(t=>z(j({},t),{[e]:r}))}clearFilters(){this.tableFilters.set(this.tableColumns.reduce((e,r)=>(e[r.key]="",e),{}))}toggleSort(e){this.sortState.update(r=>!r||r.key!==e?{key:e,direction:"asc"}:r.direction==="asc"?{key:e,direction:"desc"}:null)}getSortDirection(e){return this.sortState()?.key===e?this.sortState().direction:null}getFilterValue(e){return this.tableFilters()[e]??""}formatCellValue(e,r){let t=e[r.key];return t==null?"\u2014":r.key==="Amount"?new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",maximumFractionDigits:0}).format(this.ensureNumber(t)):r.key==="Timestamp"?this.formatTimestamp(String(t)):String(t)}trackByRecord=(e,r)=>r.Timestamp||r.FIN||e;updateOperationsCharts(e){if(!e.length){this.dropsPerEmployeeChartData=this.createBarChartData([],[],"Drops per Employee",{background:"rgba(147, 51, 234, 0.8)",border:"rgba(147, 51, 234, 1)"}),this.dropTypeChartData=this.createPieChartData([],[]),this.averageDropsTrendChartData=this.createLineChartData([],[],"Average Drops per Employee");return}let r=this.groupAndSum(e,i=>i.NAME?.trim()||"Unknown","Total Drops");this.dropsPerEmployeeChartData=this.createBarChartData(r.labels,r.values,"Drops per Employee",{background:"rgba(147, 51, 234, 0.8)",border:"rgba(147, 51, 234, 1)"});let t=[{label:"Multi Drops",value:this.sumNumeric(e,"Multi Drops")},{label:"Heavy Drops",value:this.sumNumeric(e,"Heavy Drops")},{label:"Walkup Drops",value:this.sumNumeric(e,"Walkup Drop Count")},{label:"Double Drops",value:this.sumNumeric(e,"Double Drop Count")},{label:"Single Drops",value:this.sumNumeric(e,"Total Drops")-this.sumNumeric(e,"Multi Drops")-this.sumNumeric(e,"Heavy Drops")-this.sumNumeric(e,"Walkup Drop Count")-this.sumNumeric(e,"Double Drop Count")}];this.dropTypeChartData=this.createPieChartData(t.map(i=>i.label),t.map(i=>i.value),["rgba(59, 130, 246, 0.8)","rgba(126, 156, 146, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(27, 244, 172, 0.9)"]);let a=this.groupMonthlyAverages(e);this.averageDropsTrendChartData=this.createLineChartData(a.labels,a.values,"Average Drops per Employee",{background:"rgba(34, 197, 94, 0.15)",border:"rgba(34, 197, 94, 1)"})}groupMonthlyAverages(e){let r=new Map;e.forEach(i=>{let u=i.Month||this.tryGetMonthFromDate(i.DATE)||"Unknown",c=r.get(u)??{totalDrops:0,employees:new Set};c.totalDrops+=this.ensureNumber(i["Total Drops"]),c.employees.add(i.NAME?.trim()||"Unknown"),r.set(u,c)});let t=Array.from(r.keys()),a=t.map(i=>{let m=r.get(i);if(!m)return 0;let u=m.employees.size||1;return m.totalDrops/u});return{labels:t,values:a}}aggregateByEmployee(e){let r=new Map;return e.forEach(t=>{let a=t.NAME?.trim()||"Unknown",i=r.get(a)??{totalDrops:0,multiDrops:0,heavyDrops:0,walkupDrops:0,amount:0,count:0,shifts:new Set,latestRecord:t};i.totalDrops+=this.ensureNumber(t["Total Drops"]),i.multiDrops+=this.ensureNumber(t["Multi Drops"]),i.heavyDrops+=this.ensureNumber(t["Heavy Drops"]),i.walkupDrops+=this.ensureNumber(t["Walkup Drop Count"]),i.amount+=this.ensureNumber(t.Amount),i.count+=1,t.Shift&&i.shifts.add(t.Shift),i.latestRecord=t,r.set(a,i)}),r}performanceRange=v("month");customStart=v(null);customEnd=v(null);rangeOptions=[{label:"Today",value:"today"},{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"This Year",value:"year"}];filteredRecords=b(()=>{let e=this.dashboardData(),r=this.performanceRange(),t=this.customStart(),a=this.customEnd(),{startDate:i,endDate:m}=this.getRangeBounds(r,t,a);return!i&&!m?e:e.filter(u=>{let c=this.parseRecordDate(u);return!(!c||i&&c<i||m&&c>m)})});getRangeBounds(e,r,t){let a=new Date,i=new Date(a.getFullYear(),a.getMonth(),a.getDate());switch(e){case"today":return{startDate:i,endDate:new Date(i.getTime()+24*60*60*1e3-1)};case"week":{let m=new Date(i);return m.setDate(m.getDate()-6),{startDate:m,endDate:a}}case"month":return{startDate:new Date(a.getFullYear(),a.getMonth(),1),endDate:a};case"year":return{startDate:new Date(a.getFullYear(),0,1),endDate:a};case"custom":{let m=r?new Date(new Date(r).setHours(0,0,0,0)):null,u=t?new Date(new Date(t).setHours(0,0,0,0)):null;return{startDate:m,endDate:u}}default:return{startDate:null,endDate:null}}}parseRecordDate(e){let r=e.DATE||e.Timestamp;if(!r)return null;let t=new Date(r);return Number.isNaN(t.getTime())?null:t}applyCustomRange(){this.isCustomRangeValid()&&this.performanceRange.set("custom")}isCustomRangeValid=b(()=>{let e=this.customStart(),r=this.customEnd();if(!e||!r)return!1;let t=new Date(e),a=new Date(r);return t<=a});setRange(e){this.performanceRange.set(e),e!=="custom"&&(this.customStart.set(null),this.customEnd.set(null))}updateCustomStart(e){this.customStart.set(e||null)}updateCustomEnd(e){this.customEnd.set(e||null)}static \u0275fac=function(r){return new(r||l)};static \u0275cmp=Y({type:l,selectors:[["app-dashboard"]],decls:139,vars:70,consts:[[1,"space-y-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"rounded-md","border","border-primary-200","bg-primary-50","px-4","py-3","text-sm","text-primary-800"],[1,"rounded-md","border","border-red-200","bg-red-50","px-4","py-3","text-sm","text-red-700"],[1,"flex","flex-col","gap-3","lg:flex-row","lg:items-center","lg:justify-between"],[1,"flex","flex-wrap","gap-2"],["type","button",1,"rounded-full","border","px-4","py-1.5","text-sm","font-medium","transition","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"bg-primary-600","text-white","border-primary-600","border-gray-200","text-gray-600"],[1,"flex","flex-wrap","items-center","gap-2"],["type","date",1,"rounded-md","border","border-gray-300","px-3","py-1.5","text-sm","focus:border-primary-500","focus:outline-none","focus:ring-2","focus:ring-primary-200",3,"change","value"],[1,"text-sm","text-gray-400"],["type","button",1,"rounded-md","bg-primary-600","px-4","py-1.5","text-sm","font-medium","text-white","transition","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-primary-500","disabled:bg-gray-300","disabled:text-gray-500",3,"click","disabled"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-500"],[1,"mt-1","text-2xl","font-semibold","text-gray-900"],[1,"mt-1","text-xs","text-gray-500"],[1,"p-3","bg-yellow-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"],[1,"p-3","bg-primary-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-primary-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"],[1,"p-3","bg-green-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"p-3","bg-purple-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],["title","Monthly Drops","subtitle","Aggregated by month","height","256px",3,"chartData","chartOptions","chartType"],["title","Walkup Drops by Shift","subtitle","Latest reporting period","height","256px",3,"chartData","chartOptions","chartType"],[1,"text-xl","font-semibold","text-gray-900"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-6"],["title","Drops per Employee","subtitle","Total drops by team member","height","256px",3,"chartData","chartOptions","chartType"],["title","Drop Type Distribution","subtitle","Share of drop categories","height","256px",3,"chartData","chartOptions","chartType"],["title","Average Drops per Employee","subtitle","Monthly average trend","height","256px",3,"chartData","chartOptions","chartType"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["title","Top Performer","subtitle","Highest total drops across all shifts"],[1,"space-y-2"],[1,"text-sm","text-gray-500"],["title","Underperforming Employees","padding","sm",3,"subtitle"],[1,"space-y-3"],["title","Drop Records","subtitle","Filter each column or sort to analyse individual drop performance","padding","sm"],[1,"flex","flex-col","gap-4"],[1,"flex","flex-wrap","items-center","justify-between","gap-3"],[1,"text-sm","text-gray-600"],["type","button",1,"inline-flex","items-center","gap-2","rounded-md","border","border-gray-300","bg-white","px-3","py-1.5","text-sm","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"click"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-4","py-3","text-left","text-xs","font-semibold","uppercase","tracking-wider","text-gray-500"],[1,"bg-white"],[1,"px-4","py-2"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],["type","button",1,"rounded-full","border","px-4","py-1.5","text-sm","font-medium","transition","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"click"],[1,"text-lg","font-semibold","text-gray-900"],[1,"grid","grid-cols-2","gap-4","text-sm"],[1,"text-gray-500"],[1,"font-semibold","text-gray-900"],[1,"text-xs","text-gray-400"],[1,"rounded-md","border","border-red-100","bg-red-50","px-4","py-3"],[1,"font-semibold","text-red-700"],[1,"text-xs","text-red-500"],[1,"text-sm","font-medium","text-red-600"],[1,"mt-1","text-xs","text-red-500"],["type","button",1,"flex","items-center","gap-2","text-left","hover:text-primary-600","focus:outline-none",3,"click"],[1,"text-gray-400"],[1,"w-full","rounded-md","border","border-gray-300","px-2","py-1","text-sm","focus:border-primary-500","focus:outline-none","focus:ring-2","focus:ring-primary-200",3,"input","value","placeholder"],[1,"px-4","py-3","text-sm","text-gray-900"],[1,"px-4","py-6","text-center","text-sm","text-gray-500"]],template:function(r,t){r&1&&(n(0,"div",0)(1,"div")(2,"h1",1),p(3,"Dashboard"),o(),n(4,"p",2),p(5,"Welcome back! Here's what's happening today."),o()(),A(6,ge,2,0,"div",3)(7,be,2,1,"div",4),n(8,"div",5)(9,"div",6),S(10,fe,2,11,"button",7,ce),o(),n(12,"div",8)(13,"input",9),_("change",function(i){return t.updateCustomStart((i.target==null?null:i.target.value)||"")}),o(),n(14,"span",10),p(15,"to"),o(),n(16,"input",9),_("change",function(i){return t.updateCustomEnd((i.target==null?null:i.target.value)||"")}),o(),n(17,"button",11),_("click",function(){return t.applyCustomRange()}),p(18," Apply "),o()()(),n(19,"div",12)(20,"app-card")(21,"div",13)(22,"div")(23,"p",14),p(24,"Total Drops"),o(),n(25,"p",15),p(26),g(27,"number"),o(),n(28,"p",16),p(29),g(30,"number"),o(),n(31,"p",16),p(32),g(33,"number"),o(),n(34,"p",16),p(35),g(36,"number"),o(),n(37,"p",16),p(38),g(39,"number"),o(),n(40,"p",16),p(41),g(42,"number"),g(43,"number"),o()(),n(44,"div",17),E(),n(45,"svg",18),C(46,"path",19),o()()()(),k(),n(47,"app-card")(48,"div",13)(49,"div")(50,"p",14),p(51,"Active Employees"),o(),n(52,"p",15),p(53),g(54,"number"),o()(),n(55,"div",20),E(),n(56,"svg",21),C(57,"path",22),o()()()(),k(),n(58,"app-card")(59,"div",13)(60,"div")(61,"p",14),p(62,"Total Sales"),o(),n(63,"p",15),p(64),g(65,"number"),o(),n(66,"p",16),p(67),g(68,"number"),o()(),n(69,"div",23),E(),n(70,"svg",24),C(71,"path",25),o()()()(),k(),n(72,"app-card")(73,"div",13)(74,"div")(75,"p",14),p(76,"Outstanding Invoices"),o(),n(77,"p",15),p(78),g(79,"number"),o(),n(80,"p",16),p(81),g(82,"number"),o()(),n(83,"div",17),E(),n(84,"svg",18),C(85,"path",19),o()()()(),k(),n(86,"app-card")(87,"div",13)(88,"div")(89,"p",14),p(90,"Estimated Revenue"),o(),n(91,"p",15),p(92),g(93,"currency"),o(),n(94,"p",16),p(95),o()(),n(96,"div",26),E(),n(97,"svg",27),C(98,"path",28),o()()()()(),k(),n(99,"div",29),C(100,"app-chart-wrapper",30)(101,"app-chart-wrapper",31),o(),n(102,"div",0)(103,"div")(104,"h2",32),p(105,"Operations"),o(),n(106,"p",2),p(107," Monitor drops performance across your team, spot top performers, and identify coaching opportunities. "),o()(),n(108,"div",33),C(109,"app-chart-wrapper",34)(110,"app-chart-wrapper",35)(111,"app-chart-wrapper",36),o(),n(112,"div",37)(113,"app-card",38),A(114,ye,22,13,"div",39)(115,De,2,0,"p",40),o(),n(116,"app-card",41),A(117,xe,3,0,"div",42)(118,Ce,2,0,"p",40),o()()(),n(119,"app-card",43)(120,"div",44)(121,"div",45)(122,"p",46),p(123),o(),n(124,"button",47),_("click",function(){return t.clearFilters()}),p(125," Clear filters "),o()(),n(126,"div",48)(127,"table",49)(128,"thead",50)(129,"tr"),S(130,Ee,8,2,"th",51,H),o(),n(132,"tr",52),S(133,ke,2,3,"th",53,H),o()(),n(135,"tbody",54),S(136,Ae,3,0,"tr",55,t.trackByRecord,!0,Ne,3,1,"tr"),o()()()()()()),r&2&&(s(6),w(t.isLoading()?6:-1),s(),w(t.error()?7:-1),s(3),T(t.rangeOptions),s(3),D("value",t.customStart()||""),s(3),D("value",t.customEnd()||""),s(),D("disabled",!t.isCustomRangeValid()),s(9),h(" ",y(27,40,t.totalDrops())," "),s(3),h(" Multi drops: ",y(30,42,t.multiDrops())," "),s(3),h(" Heavy drops: ",y(33,44,t.heavyDrops())," "),s(3),h(" Walkup drops: ",y(36,46,t.walkupDropCount())," "),s(3),h(" Double drops: ",y(39,48,t.doubleDropCount())," "),s(3),L(" Avg drops/day : ",y(42,50,t.totalDrops()/t.dailyTotals())," Day Count : ",y(43,52,t.dailyTotals())," "),s(12),h(" ",y(54,54,t.activeEmployee())," "),s(11),h(" ",y(65,56,t.totalAmount())," "),s(3),h(" Avg Sales/day : ",y(68,58,t.totalAmount()/t.dailyTotals())," "),s(11),h(" ",y(79,60,t.heavyDrops())," "),s(3),h(" Average / shift: ",N(82,62,t.recordsCount()?t.heavyDrops()/t.recordsCount():0,"1.0-1")," "),s(11),h(" ",J(93,65,t.totalAmount()-86*t.activeEmployee()*t.dailyTotals(),"SGD ","symbol","1.0-0")," "),s(3),h(" Records: ",t.recordsCount()," "),s(5),D("chartData",t.lineChartData)("chartOptions",t.lineChartOptions)("chartType",t.lineChartType),s(),D("chartData",t.barChartData)("chartOptions",t.barChartOptions)("chartType",t.barChartType),s(8),D("chartData",t.dropsPerEmployeeChartData)("chartOptions",t.dropsPerEmployeeChartOptions)("chartType",t.dropsPerEmployeeChartType),s(),D("chartData",t.dropTypeChartData)("chartOptions",t.dropTypeChartOptions)("chartType",t.dropTypeChartType),s(),D("chartData",t.averageDropsTrendChartData)("chartOptions",t.averageDropsTrendChartOptions)("chartType",t.averageDropsTrendChartType),s(3),w(t.topPerformer()?114:115),s(2),D("subtitle","Average drops per shift below "+t.underperformerThreshold),s(),w(t.underperformingEmployees().length?117:118),s(6),L(" Showing ",t.filteredTableData().length," of ",t.recordsCount()," records "),s(7),T(t.tableColumns),s(3),T(t.tableColumns),s(3),T(t.filteredTableData()))},dependencies:[te,K,ee,X,ae,ne],encapsulation:2})}return l})()});Re();export{Ue as DashboardComponent};
