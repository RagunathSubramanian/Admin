import{c as C,d as R}from"./chunk-F3C3DPQ7.js";import{b as F,c as m,d as L,e as E,g as _,i as N,k as q,o as I,q as P,r as j,s as D,t as B}from"./chunk-OKMSR2WX.js";import{h as x,m as k}from"./chunk-DFADLG5I.js";import{a as A,b as V,c as G,d as z}from"./chunk-NI4BJD2M.js";import{Ba as i,Fa as d,Ka as g,Oa as c,Ob as w,Va as s,Xa as f,_a as b,bc as S,cb as r,db as t,eb as u,hc as T,ib as v,jb as y,oa as p,rb as n,tb as h}from"./chunk-VUHZN6IL.js";import{d as M}from"./chunk-3A3XYTID.js";function O(a,J){if(a&1&&(r(0,"div",6),n(1),t()),a&2){let l=y();i(),h(" ",l.error()," ")}}var oe,H=M(()=>{w();T();j();V();B();z();w();j();k();R();oe=(()=>{class a{fb;router;authService;loginForm;isLoading=p(!1);error=p(null);constructor(l,o,e){this.fb=l,this.router=o,this.authService=e,this.loginForm=this.fb.group({email:["",[m.required,m.email]],password:["",[m.required,m.minLength(6)]]})}onSubmit(){if(this.loginForm.valid){this.isLoading.set(!0),this.error.set(null);let{email:l,password:o}=this.loginForm.value;this.authService.login(l,o).subscribe({next:e=>{this.isLoading.set(!1),e.role==="admin"?this.router.navigate(["/dashboard"]):this.router.navigate(["/user/dashboard"])},error:e=>{this.isLoading.set(!1),this.error.set(e.message||"Login failed. Please try again.")}})}else this.loginForm.markAllAsTouched()}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}static \u0275fac=function(o){return new(o||a)(d(I),d(x),d(C))};static \u0275cmp=g({type:a,selectors:[["app-login"]],decls:27,vars:12,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-50","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8"],[1,"mt-6","text-center","text-3xl","font-extrabold","text-gray-900"],[1,"mt-2","text-center","text-sm","text-gray-600"],["href","#",1,"font-medium","text-primary-600","hover:text-primary-500"],[1,"space-y-6",3,"ngSubmit","formGroup"],["role","alert",1,"bg-red-50","border","border-red-200","text-red-700","px-4","py-3","rounded-lg","text-sm"],["label","Email address","inputId","email",3,"required","error"],["id","email","type","email","formControlName","email","autocomplete","email","aria-describedby","email-error",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-transparent"],["label","Password","inputId","password",3,"required","error"],["id","password","type","password","formControlName","password","autocomplete","current-password","aria-describedby","password-error",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-primary-500","focus:border-transparent"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],["id","remember-me","name","remember-me","type","checkbox",1,"h-4","w-4","text-primary-600","focus:ring-primary-500","border-gray-300","rounded"],["for","remember-me",1,"ml-2","block","text-sm","text-gray-900"],[1,"text-sm"],["type","submit","variant","primary","size","lg","ariaLabel","Sign in",1,"w-full",3,"disabled","loading"]],template:function(o,e){o&1&&(r(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),n(4," Sign in to your account "),t(),r(5,"p",3),n(6," Or "),r(7,"a",4),n(8," start your 14-day free trial "),t()()(),r(9,"app-card")(10,"form",5),v("ngSubmit",function(){return e.onSubmit()}),c(11,O,2,1,"div",6),r(12,"app-form-field",7),u(13,"input",8),t(),r(14,"app-form-field",9),u(15,"input",10),t(),r(16,"div",11)(17,"div",12),u(18,"input",13),r(19,"label",14),n(20," Remember me "),t()(),r(21,"div",15)(22,"a",4),n(23," Forgot your password? "),t()()(),r(24,"div")(25,"app-button",16),n(26," Sign in "),t()()()()()()),o&2&&(i(10),s("formGroup",e.loginForm),i(),b(e.error()?11:-1),i(),s("required",!0)("error",e.email!=null&&e.email.touched&&(e.email!=null&&e.email.invalid)?"Please enter a valid email address":void 0),i(),f("border-red-500",(e.email==null?null:e.email.touched)&&(e.email==null?null:e.email.invalid)),i(),s("required",!0)("error",e.password!=null&&e.password.touched&&(e.password!=null&&e.password.invalid)?"Password must be at least 6 characters":void 0),i(),f("border-red-500",(e.password==null?null:e.password.touched)&&(e.password==null?null:e.password.invalid)),i(10),s("disabled",e.isLoading())("loading",e.isLoading()))},dependencies:[S,P,_,F,L,E,N,q,A,D,G],encapsulation:2})}return a})()});H();export{oe as LoginComponent};
