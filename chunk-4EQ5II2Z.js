import{a as se,b as he,c as le,d as ge}from"./chunk-TPTFHVLD.js";import{a as ie,b as me,c as oe,d as ce}from"./chunk-IH4XG7TN.js";import"./chunk-OCP6ILJ3.js";import"./chunk-OKMSR2WX.js";import"./chunk-ZMABTEAI.js";import"./chunk-4QDCLFOO.js";import{c as ae,d as de}from"./chunk-NI4BJD2M.js";import{$ as F,A as G,Ba as s,Bb as b,Cb as f,Db as N,Eb as J,K as ue,Ka as Y,Lb as h,Mb as Q,Oa as A,Ob as X,T as H,Ua as O,Va as D,Xa as Z,Zb as K,_a as w,_b as ee,aa as B,ab as S,ac as te,ba as E,bb as _,bc as re,ca as k,cb as a,db as i,eb as x,ga as q,hb as I,hc as ne,ib as T,jb as y,oa as v,rb as p,sb as L,tb as c,ub as V}from"./chunk-VUHZN6IL.js";import{a as j,b as $,d as pe}from"./chunk-3A3XYTID.js";function fe(l,m){l&1&&(a(0,"div",3),p(1," Loading dashboard data\u2026 "),i())}function De(l,m){if(l&1&&(a(0,"div",4),p(1),i()),l&2){let e=y();s(),c(" ",e.error()," ")}}function ve(l,m){if(l&1){let e=I();a(0,"button",58),T("click",function(){let t=F(e).$implicit,n=y();return B(n.setRange(t.value))}),p(1),i()}if(l&2){let e=m.$implicit,r=y();Z("bg-primary-600",r.performanceRange()===e.value)("text-white",r.performanceRange()===e.value)("border-primary-600",r.performanceRange()===e.value)("border-gray-200",r.performanceRange()!==e.value)("text-gray-600",r.performanceRange()!==e.value),s(),c(" ",e.label," ")}}function xe(l,m){if(l&1&&(a(0,"div",39)(1,"div")(2,"p",59),p(3),i(),a(4,"p",40),p(5),i()(),a(6,"div",60)(7,"div")(8,"p",61),p(9,"Total Drops"),i(),a(10,"p",62),p(11),b(12,"number"),i()(),a(13,"div")(14,"p",61),p(15,"Avg / Shift"),i(),a(16,"p",62),p(17),b(18,"number"),i()()(),a(19,"p",63),p(20),b(21,"date"),i()()),l&2){let e,r,t,n,o,u=y();s(3),L((e=u.topPerformer())==null?null:e.name),s(2),c(" ",!((r=u.topPerformer())==null||r.shifts==null)&&r.shifts.length?(r=u.topPerformer())==null||r.shifts==null?null:r.shifts.join(", "):"N/A"," "),s(6),c(" ",f(12,5,(t=u.topPerformer())==null?null:t.totalDrops)," "),s(6),c(" ",N(18,7,(n=u.topPerformer())==null?null:n.averageDrops,"1.0-1")," "),s(3),c(" Latest activity: ",!((o=u.topPerformer())==null||o.latest==null)&&o.latest.Timestamp?N(21,10,(o=u.topPerformer())==null||o.latest==null?null:o.latest.Timestamp,"medium"):"N/A"," ")}}function Ce(l,m){l&1&&(a(0,"p",40),p(1,"No performance data available."),i())}function Te(l,m){if(l&1&&(a(0,"div",64)(1,"div",13)(2,"div")(3,"p",65),p(4),i(),a(5,"p",66),p(6),i()(),a(7,"span",67),p(8),b(9,"number"),i()(),a(10,"p",68),p(11),b(12,"number"),i()()),l&2){let e=m.$implicit;s(4),L(e.name),s(2),c(" Shifts: ",e.shifts.join(", ")||"N/A"," "),s(2),c(" ",N(9,4,e.averageDrops,"1.0-1")," avg "),s(3),c(" Total drops: ",f(12,7,e.totalDrops)," ")}}function Se(l,m){if(l&1&&(a(0,"div",42),S(1,Te,13,9,"div",64,ye),i()),l&2){let e=y();s(),_(e.underperformingEmployees())}}function _e(l,m){l&1&&(a(0,"p",40),p(1,"All employees are meeting the target."),i())}function Ee(l,m){l&1&&p(0," \u2191 ")}function ke(l,m){l&1&&p(0," \u2193 ")}function we(l,m){l&1&&p(0," \u21C5 ")}function Ae(l,m){if(l&1){let e=I();a(0,"th",53)(1,"button",69),T("click",function(){let t=F(e).$implicit,n=y();return B(n.toggleSort(t.key))}),a(2,"span"),p(3),i(),a(4,"span",70),A(5,Ee,1,0)(6,ke,1,0)(7,we,1,0),i()()()}if(l&2){let e=m.$implicit,r=y();s(3),L(e.label),s(2),w(r.getSortDirection(e.key)==="asc"?5:r.getSortDirection(e.key)==="desc"?6:7)}}function Ne(l,m){if(l&1){let e=I();a(0,"th",55)(1,"input",71),T("input",function(t){let n,o=F(e).$implicit,u=y();return B(u.updateFilter(o.key,(n=t.target==null?null:t.target.value)!==null&&n!==void 0?n:""))}),i()()}if(l&2){let e=m.$implicit,r=y();s(),D("value",r.getFilterValue(e.key))("placeholder","Filter "+e.label),O("type",e.type==="number"?"number":e.type==="date"?"date":"text")}}function Re(l,m){if(l&1&&(a(0,"td",72),p(1),i()),l&2){let e=m.$implicit,r=y().$implicit,t=y();s(),c(" ",t.formatCellValue(r,e)," ")}}function Me(l,m){if(l&1&&(a(0,"tr",57),S(1,Re,2,1,"td",72,P),i()),l&2){let e=y();s(),_(e.tableColumns)}}function Fe(l,m){if(l&1&&(a(0,"tr")(1,"td",73),p(2," No records match the current filters. "),i()()),l&2){let e=y();s(),O("colspan",e.tableColumns.length)}}var be,P,ye,Ge,Be=pe(()=>{X();ne();de();me();ce();he();ue();ge();X();ne();be=(l,m)=>m.value,P=(l,m)=>m.key,ye=(l,m)=>m.name;Ge=(()=>{class l{dashboardService=H(le);destroyRef=H(q);isLoading=v(!1);error=v(null);dashboardData=v([]);underperformerThreshold=80;tableColumns=[{key:"Timestamp",label:"Timestamp",type:"text"},{key:"NAME",label:"Name",type:"text"},{key:"Shift",label:"Shift",type:"text"},{key:"Total Drops",label:"Total Drops",type:"number",numeric:!0},{key:"Multi Drops",label:"Multi Drops",type:"number",numeric:!0},{key:"Heavy Drops",label:"Heavy Drops",type:"number",numeric:!0},{key:"Walkup Drop Count",label:"Walkup Drops",type:"number",numeric:!0},{key:"Double Drop Count",label:"Double Drops",type:"number",numeric:!0},{key:"Amount",label:"Amount",type:"number",numeric:!0}];tableFilters=v(this.tableColumns.reduce((e,r)=>(e[r.key]="",e),{}));sortState=v(null);filteredTableData=h(()=>{let e=this.tableFilters(),r=this.sortState(),n=this.filteredRecords().filter(u=>this.tableColumns.every(d=>{let g=e[d.key];if(!g)return!0;let C=u[d.key];if(C==null)return!1;if(d.type==="number"){let M=Number(g);return Number.isNaN(M)?!0:Number(C)===M}return String(C).toLowerCase().includes(g.toLowerCase())}));if(!r)return n;let o=this.tableColumns.find(u=>u.key===r.key);return[...n].sort((u,d)=>{let g=u[r.key],C=d[r.key];if(o?.numeric){let z=this.ensureNumber(g),U=this.ensureNumber(C);return r.direction==="asc"?z-U:U-z}let R=String(g??""),M=String(C??""),W=R.localeCompare(M,void 0,{sensitivity:"base",numeric:!0});return r.direction==="asc"?W:-W})});lineChartOptions={elements:{line:{tension:.5}},scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}},responsive:!0,maintainAspectRatio:!1};lineChartType="line";lineChartData=h(()=>{let e=this.filteredRecords();if(!e.length)return this.createLineChartData([],[]);let r=this.groupAndSum(e,t=>t.Month||this.tryGetMonthFromDate(t.DATE));return this.createLineChartData(r.labels,r.values)});dailyTrendsChartData=h(()=>{let e=this.filteredRecords();if(!e.length)return this.createLineChartData([],[],"Daily Drops",{background:"rgba(34, 197, 94, 0.1)",border:"rgba(34, 197, 94, 1)"});let r=new Map;e.forEach(n=>{let o=n.DATE;if(!o)return;let u=this.parseRecordDate({DATE:o});if(!u)return;let d=u.toISOString().split("T")[0],g=r.get(d);g?g.value+=this.ensureNumber(n["Total Drops"]):r.set(d,{date:u,value:this.ensureNumber(n["Total Drops"])})});let t=Array.from(r.entries()).map(([n,o])=>({label:o.date.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),value:o.value,date:o.date})).sort((n,o)=>n.date.getTime()-o.date.getTime());return this.createLineChartData(t.map(n=>n.label),t.map(n=>n.value),"Daily Drops",{background:"rgba(34, 197, 94, 0.1)",border:"rgba(34, 197, 94, 1)"})});dailyTrendsChartOptions={elements:{line:{tension:.5}},scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}},responsive:!0,maintainAspectRatio:!1};dailyTrendsChartType="line";dropsPerEmployeeChartData=h(()=>{let e=this.filteredRecords();if(!e.length)return this.createBarChartData([],[],"Drops per Employee",{background:"rgba(147, 51, 234, 0.8)",border:"rgba(147, 51, 234, 1)"});let r=this.groupAndSum(e,t=>t.NAME?.trim()||"Unknown","Total Drops");return this.createBarChartData(r.labels,r.values,"Drops per Employee",{background:"rgba(147, 51, 234, 0.8)",border:"rgba(147, 51, 234, 1)"})});dropsPerEmployeeChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}};dropsPerEmployeeChartType="bar";dropTypeChartData=h(()=>{let e=this.filteredRecords();if(!e.length)return this.createPieChartData([],[]);let r=[{label:"Multi Drops",value:this.sumNumeric(e,"Multi Drops")},{label:"Heavy Drops",value:this.sumNumeric(e,"Heavy Drops")},{label:"Walkup Drops",value:this.sumNumeric(e,"Walkup Drop Count")},{label:"Double Drops",value:this.sumNumeric(e,"Double Drop Count")},{label:"Single Drops",value:this.sumNumeric(e,"Total Drops")-this.sumNumeric(e,"Multi Drops")-this.sumNumeric(e,"Heavy Drops")-this.sumNumeric(e,"Walkup Drop Count")-this.sumNumeric(e,"Double Drop Count")}];return this.createPieChartData(r.map(t=>t.label),r.map(t=>t.value),["rgba(59, 130, 246, 0.8)","rgba(126, 156, 146, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(27, 244, 172, 0.9)"])});dropTypeChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}};dropTypeChartType="pie";averageDropsTrendChartData=h(()=>{let e=this.filteredRecords();if(!e.length)return this.createLineChartData([],[],"Average Drops per Employee");let r=this.groupMonthlyAverages(e);return this.createLineChartData(r.labels,r.values,"Average Drops per Employee",{background:"rgba(34, 197, 94, 0.15)",border:"rgba(34, 197, 94, 1)"})});averageDropsTrendChartOptions;averageDropsTrendChartType="line";totalDrops=h(()=>this.sumNumeric(this.filteredRecords(),"Total Drops"));multiDrops=h(()=>this.sumNumeric(this.filteredRecords(),"Multi Drops"));heavyDrops=h(()=>this.sumNumeric(this.filteredRecords(),"Heavy Drops"));walkupDropCount=h(()=>this.sumNumeric(this.filteredRecords(),"Walkup Drop Count"));totalAmount=h(()=>this.sumNumeric(this.filteredRecords(),"Amount"));doubleDropCount=h(()=>this.sumNumeric(this.filteredRecords(),"Double Drop Count"));activeEmployee=h(()=>new Set(this.filteredRecords().map(r=>r.NAME)).size);dailyTotals=h(()=>new Set(this.filteredRecords().map(r=>r.DATE)).size);recordsCount=h(()=>this.filteredRecords().length);recentActivities=h(()=>this.filteredRecords().slice(0,5).map((r,t)=>({id:r.Timestamp||r.FIN||r["Email Address"]||`${t}`,user:r.NAME?.trim()||"Unknown driver",action:`${this.ensureNumber(r["Total Drops"])} drops \u2022 Shift ${r.Shift||"N/A"}`,time:this.formatTimestamp(r.Timestamp||r.DATE)})));constructor(){this.averageDropsTrendChartOptions={elements:{line:{tension:.5}},scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}},responsive:!0,maintainAspectRatio:!1},Q(()=>{let e=this.groupedData();this.groupedDataSignal.set(e)})}topPerformer=h(()=>{let e=this.filteredRecords();if(!e.length)return null;let r=Array.from(this.aggregateByEmployee(e).entries());if(!r.length)return null;let[t,n]=r.reduce((u,d)=>d[1].totalDrops>u[1].totalDrops?d:u,r[0]),o=n.count>0?n.totalDrops/n.count:0;return{name:t,totalDrops:n.totalDrops,averageDrops:o,shifts:Array.from(n.shifts),latest:n.latestRecord}});underperformingEmployees=h(()=>{let e=this.filteredRecords();if(!e.length)return[];let r=this.aggregateByEmployee(e);return Array.from(r.entries()).map(([t,n])=>{let o=n.count>0?n.totalDrops/n.count:0;return{name:t,averageDrops:o,totalDrops:n.totalDrops,shifts:Array.from(n.shifts)}}).filter(t=>t.averageDrops<this.underperformerThreshold).sort((t,n)=>t.averageDrops-n.averageDrops)});ngOnInit(){this.loadDashboardData()}loadDashboardData(e){this.isLoading.set(!0),this.error.set(null),this.dashboardService.getDashboardData(e).pipe(se(this.destroyRef),G(()=>this.isLoading.set(!1))).subscribe({next:r=>{this.dashboardData.set(r)},error:r=>{this.error.set(this.extractErrorMessage(r)),this.dashboardData.set([])}})}createLineChartData(e,r,t="Total Drops",n={background:"rgba(59, 130, 246, 0.1)",border:"rgba(59, 130, 246, 1)"}){return{datasets:[{data:r,label:t,backgroundColor:n.background,borderColor:n.border,pointBackgroundColor:n.border,pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:n.border,fill:"origin"}],labels:e}}createBarChartData(e,r,t="Walkup Drops",n={background:"rgba(59, 130, 246, 0.8)",border:"rgba(59, 130, 246, 1)"}){return{labels:e,datasets:[{data:r,label:t,backgroundColor:n.background,borderColor:n.border,borderWidth:1}]}}createPieChartData(e,r,t=[]){return{labels:e,datasets:[{data:r,backgroundColor:t.length>0?t:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:"#fff",borderWidth:1}]}}sumNumeric(e,r){return e.reduce((t,n)=>{let o=n[r],u=this.ensureNumber(o);return t+u},0)}groupAndSum(e,r,t="Total Drops"){let n=new Map;e.forEach(d=>{let g=r(d)||"Unknown",R=(n.get(g)??0)+this.ensureNumber(d[t]);n.set(g,R)});let o=Array.from(n.keys()),u=o.map(d=>n.get(d)??0);return{labels:o,values:u}}ensureNumber(e){if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()==="")return 0;let r=Number(e);return Number.isFinite(r)?r:0}tryGetMonthFromDate(e){if(!e)return"Unknown";let r=new Date(e);return Number.isNaN(r.getTime())?e:r.toLocaleString(void 0,{month:"short",year:"numeric"})}formatTimestamp(e){if(!e)return"Unknown time";let r=new Date(e);return Number.isNaN(r.getTime())?e:r.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}extractErrorMessage(e){return e instanceof Error||e&&typeof e=="object"&&"message"in e&&typeof e.message=="string"?e.message:"Unable to load dashboard data. Please try again later."}updateFilter(e,r){this.tableFilters.update(t=>$(j({},t),{[e]:r}))}clearFilters(){this.tableFilters.set(this.tableColumns.reduce((e,r)=>(e[r.key]="",e),{}))}toggleSort(e){this.sortState.update(r=>!r||r.key!==e?{key:e,direction:"asc"}:r.direction==="asc"?{key:e,direction:"desc"}:null)}getSortDirection(e){return this.sortState()?.key===e?this.sortState().direction:null}getFilterValue(e){return this.tableFilters()[e]??""}formatCellValue(e,r){let t=e[r.key];return t==null?"\u2014":r.key==="Amount"?new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",maximumFractionDigits:0}).format(this.ensureNumber(t)):r.key==="Timestamp"?this.formatTimestamp(String(t)):String(t)}trackByRecord=(e,r)=>r.Timestamp||r.FIN||e;groupMonthlyAverages(e){let r=new Map;e.forEach(o=>{let d=o.Month||this.tryGetMonthFromDate(o.DATE)||"Unknown",g=r.get(d)??{totalDrops:0,employees:new Set};g.totalDrops+=this.ensureNumber(o["Total Drops"]),g.employees.add(o.NAME?.trim()||"Unknown"),r.set(d,g)});let t=Array.from(r.keys()),n=t.map(o=>{let u=r.get(o);if(!u)return 0;let d=u.employees.size||1;return u.totalDrops/d});return{labels:t,values:n}}aggregateByEmployee(e){let r=new Map;return e.forEach(t=>{let n=t.NAME?.trim()||"Unknown",o=r.get(n)??{totalDrops:0,multiDrops:0,heavyDrops:0,walkupDrops:0,amount:0,count:0,shifts:new Set,latestRecord:t};o.totalDrops+=this.ensureNumber(t["Total Drops"]),o.multiDrops+=this.ensureNumber(t["Multi Drops"]),o.heavyDrops+=this.ensureNumber(t["Heavy Drops"]),o.walkupDrops+=this.ensureNumber(t["Walkup Drop Count"]),o.amount+=this.ensureNumber(t.Amount),o.count+=1,t.Shift&&o.shifts.add(t.Shift),o.latestRecord=t,r.set(n,o)}),r}performanceRange=v("month");customStart=v(null);customEnd=v(null);rangeOptions=[{label:"Today",value:"today"},{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"This Year",value:"year"}];filteredRecords=h(()=>{let e=this.dashboardData(),r=this.performanceRange(),t=this.customStart(),n=this.customEnd(),{startDate:o,endDate:u}=this.getRangeBounds(r,t,n);return!o&&!u?e:e.filter(d=>{let g=this.parseRecordDate(d);return!(!g||o&&g<o||u&&g>u)})});getRangeBounds(e,r,t){let n=new Date,o=new Date(n.getFullYear(),n.getMonth(),n.getDate());switch(e){case"today":return{startDate:o,endDate:new Date(o.getTime()+24*60*60*1e3-1)};case"week":{let u=new Date(o);return u.setDate(u.getDate()-6),{startDate:u,endDate:n}}case"month":return{startDate:new Date(n.getFullYear(),n.getMonth(),1),endDate:n};case"year":return{startDate:new Date(n.getFullYear(),0,1),endDate:n};case"custom":{let u=r?new Date(new Date(r).setHours(0,0,0,0)):null,d=t?new Date(new Date(t).setHours(0,0,0,0)):null;return{startDate:u,endDate:d}}default:return{startDate:null,endDate:null}}}parseRecordDate(e){let r=e.DATE||e.Timestamp;if(!r)return null;let t=new Date(r);return Number.isNaN(t.getTime())?null:t}applyCustomRange(){this.isCustomRangeValid()&&this.performanceRange.set("custom")}isCustomRangeValid=h(()=>{let e=this.customStart(),r=this.customEnd();if(!e||!r)return!1;let t=new Date(e),n=new Date(r);return t<=n});setRange(e){this.performanceRange.set(e),e!=="custom"&&(this.customStart.set(null),this.customEnd.set(null))}updateCustomStart(e){this.customStart.set(e||null)}updateCustomEnd(e){this.customEnd.set(e||null)}groupedData=h(()=>{let e=this.filteredRecords(),r=new Map;return e.forEach(n=>{let o=n.DATE||"Unknown",u=o,d=r.get(u);d?(d["Total Drops"]+=this.ensureNumber(n["Total Drops"]),d["Multi Drops"]+=this.ensureNumber(n["Multi Drops"]),d["Heavy Drops"]+=this.ensureNumber(n["Heavy Drops"]),d["Walkup Drop Count"]+=this.ensureNumber(n["Walkup Drop Count"]),d["Double Drop Count"]+=this.ensureNumber(n["Double Drop Count"]),d.Amount+=this.ensureNumber(n.Amount),d.DropCount+=this.ensureNumber(n.DropCount)):r.set(u,{DATE:o,"Total Drops":this.ensureNumber(n["Total Drops"]),"Multi Drops":this.ensureNumber(n["Multi Drops"]),"Heavy Drops":this.ensureNumber(n["Heavy Drops"]),"Walkup Drop Count":this.ensureNumber(n["Walkup Drop Count"]),"Double Drop Count":this.ensureNumber(n["Double Drop Count"]),Amount:this.ensureNumber(n.Amount),DropCount:this.ensureNumber(n.DropCount)})}),Array.from(r.values()).sort((n,o)=>{let u=this.parseRecordDate({DATE:n.DATE}),d=this.parseRecordDate({DATE:o.DATE});return!u&&!d?0:u?d?d.getTime()-u.getTime():-1:1})});groupedDataSignal=v([]);groupedTablePageSize=v(10);groupedTableColumns=[{key:"DATE",label:"Date",sortable:!0,filterable:!0},{key:"Total Drops",label:"Total Drops",sortable:!0,render:e=>e["Total Drops"].toLocaleString()},{key:"Multi Drops",label:"Multi Drops",sortable:!0,render:e=>e["Multi Drops"].toLocaleString()},{key:"Heavy Drops",label:"Heavy Drops",sortable:!0,render:e=>e["Heavy Drops"].toLocaleString()},{key:"Walkup Drop Count",label:"Walkup Drops",sortable:!0,render:e=>e["Walkup Drop Count"].toLocaleString()},{key:"Double Drop Count",label:"Double Drops",sortable:!0,render:e=>e["Double Drop Count"].toLocaleString()},{key:"Amount",label:"Amount",sortable:!0,render:e=>new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e.Amount)},{key:"DropCount",label:"Drop Count",sortable:!0,render:e=>e.DropCount.toLocaleString()}];static \u0275fac=function(r){return new(r||l)};static \u0275cmp=Y({type:l,selectors:[["app-dashboard"]],decls:141,vars:77,consts:[[1,"space-y-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"rounded-md","border","border-primary-200","bg-primary-50","px-4","py-3","text-sm","text-primary-800"],[1,"rounded-md","border","border-red-200","bg-red-50","px-4","py-3","text-sm","text-red-700"],[1,"flex","flex-col","gap-3","lg:flex-row","lg:items-center","lg:justify-between"],[1,"flex","flex-wrap","gap-2"],["type","button",1,"rounded-full","border","px-4","py-1.5","text-sm","font-medium","transition","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"bg-primary-600","text-white","border-primary-600","border-gray-200","text-gray-600"],[1,"flex","flex-wrap","items-center","gap-2"],["type","date",1,"rounded-md","border","border-gray-300","px-3","py-1.5","text-sm","focus:border-primary-500","focus:outline-none","focus:ring-2","focus:ring-primary-200",3,"change","value"],[1,"text-sm","text-gray-400"],["type","button",1,"rounded-md","bg-primary-600","px-4","py-1.5","text-sm","font-medium","text-white","transition","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-primary-500","disabled:bg-gray-300","disabled:text-gray-500",3,"click","disabled"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-500"],[1,"mt-1","text-2xl","font-semibold","text-gray-900"],[1,"mt-1","text-xs","text-gray-500"],[1,"p-3","bg-yellow-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"],[1,"p-3","bg-primary-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-primary-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"],[1,"p-3","bg-green-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"p-3","bg-purple-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],["title","Monthly Drops","subtitle","Aggregated by month","height","256px",3,"chartData","chartOptions","chartType"],["title","Daily Drops Trends","subtitle","Total drops per day","height","256px",3,"chartData","chartOptions","chartType"],[1,"text-xl","font-semibold","text-gray-900"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-6"],["title","Drops per Employee","subtitle","Total drops by team member","height","256px",3,"chartData","chartOptions","chartType"],["title","Drop Type Distribution","subtitle","Share of drop categories","height","256px",3,"chartData","chartOptions","chartType"],["title","Average Drops per Employee","subtitle","Monthly average trend","height","256px",3,"chartData","chartOptions","chartType"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["title","Top Performer","subtitle","Highest total drops across all shifts"],[1,"space-y-2"],[1,"text-sm","text-gray-500"],["title","Underperforming Employees","padding","sm",3,"subtitle"],[1,"space-y-3"],["title","Grouped Summary","subtitle","Grouped by Date","padding","sm"],[3,"columns","data","pagination","pageSize","showToolbar","showFilters","searchable"],["title","Drop Records","subtitle","Filter each column or sort to analyse individual drop performance","padding","sm"],[1,"flex","flex-col","gap-4"],[1,"flex","flex-wrap","items-center","justify-between","gap-3"],[1,"text-sm","text-gray-600"],["type","button",1,"inline-flex","items-center","gap-2","rounded-md","border","border-gray-300","bg-white","px-3","py-1.5","text-sm","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"click"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-4","py-3","text-left","text-xs","font-semibold","uppercase","tracking-wider","text-gray-500"],[1,"bg-white"],[1,"px-4","py-2"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],["type","button",1,"rounded-full","border","px-4","py-1.5","text-sm","font-medium","transition","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"click"],[1,"text-lg","font-semibold","text-gray-900"],[1,"grid","grid-cols-2","gap-4","text-sm"],[1,"text-gray-500"],[1,"font-semibold","text-gray-900"],[1,"text-xs","text-gray-400"],[1,"rounded-md","border","border-red-100","bg-red-50","px-4","py-3"],[1,"font-semibold","text-red-700"],[1,"text-xs","text-red-500"],[1,"text-sm","font-medium","text-red-600"],[1,"mt-1","text-xs","text-red-500"],["type","button",1,"flex","items-center","gap-2","text-left","hover:text-primary-600","focus:outline-none",3,"click"],[1,"text-gray-400"],[1,"w-full","rounded-md","border","border-gray-300","px-2","py-1","text-sm","focus:border-primary-500","focus:outline-none","focus:ring-2","focus:ring-primary-200",3,"input","value","placeholder"],[1,"px-4","py-3","text-sm","text-gray-900"],[1,"px-4","py-6","text-center","text-sm","text-gray-500"]],template:function(r,t){r&1&&(a(0,"div",0)(1,"div")(2,"h1",1),p(3,"Dashboard"),i(),a(4,"p",2),p(5,"Welcome back! Here's what's happening today."),i()(),A(6,fe,2,0,"div",3)(7,De,2,1,"div",4),a(8,"div",5)(9,"div",6),S(10,ve,2,11,"button",7,be),i(),a(12,"div",8)(13,"input",9),T("change",function(o){return t.updateCustomStart((o.target==null?null:o.target.value)||"")}),i(),a(14,"span",10),p(15,"to"),i(),a(16,"input",9),T("change",function(o){return t.updateCustomEnd((o.target==null?null:o.target.value)||"")}),i(),a(17,"button",11),T("click",function(){return t.applyCustomRange()}),p(18," Apply "),i()()(),a(19,"div",12)(20,"app-card")(21,"div",13)(22,"div")(23,"p",14),p(24,"Total Drops"),i(),a(25,"p",15),p(26),b(27,"number"),i(),a(28,"p",16),p(29),b(30,"number"),i(),a(31,"p",16),p(32),b(33,"number"),i(),a(34,"p",16),p(35),b(36,"number"),i(),a(37,"p",16),p(38),b(39,"number"),i(),a(40,"p",16),p(41),b(42,"number"),b(43,"number"),i()(),a(44,"div",17),E(),a(45,"svg",18),x(46,"path",19),i()()()(),k(),a(47,"app-card")(48,"div",13)(49,"div")(50,"p",14),p(51,"Active Employees"),i(),a(52,"p",15),p(53),b(54,"number"),i()(),a(55,"div",20),E(),a(56,"svg",21),x(57,"path",22),i()()()(),k(),a(58,"app-card")(59,"div",13)(60,"div")(61,"p",14),p(62,"Total Sales"),i(),a(63,"p",15),p(64),b(65,"number"),i(),a(66,"p",16),p(67),b(68,"number"),i()(),a(69,"div",23),E(),a(70,"svg",24),x(71,"path",25),i()()()(),k(),a(72,"app-card")(73,"div",13)(74,"div")(75,"p",14),p(76,"Outstanding Invoices"),i(),a(77,"p",15),p(78),b(79,"number"),i(),a(80,"p",16),p(81),b(82,"number"),i()(),a(83,"div",17),E(),a(84,"svg",18),x(85,"path",19),i()()()(),k(),a(86,"app-card")(87,"div",13)(88,"div")(89,"p",14),p(90,"Estimated Revenue"),i(),a(91,"p",15),p(92),b(93,"currency"),i(),a(94,"p",16),p(95),i()(),a(96,"div",26),E(),a(97,"svg",27),x(98,"path",28),i()()()()(),k(),a(99,"div",29),x(100,"app-chart-wrapper",30)(101,"app-chart-wrapper",31),i(),a(102,"div",0)(103,"div")(104,"h2",32),p(105,"Operations"),i(),a(106,"p",2),p(107," Monitor drops performance across your team, spot top performers, and identify coaching opportunities. "),i()(),a(108,"div",33),x(109,"app-chart-wrapper",34)(110,"app-chart-wrapper",35)(111,"app-chart-wrapper",36),i(),a(112,"div",37)(113,"app-card",38),A(114,xe,22,13,"div",39)(115,Ce,2,0,"p",40),i(),a(116,"app-card",41),A(117,Se,3,0,"div",42)(118,_e,2,0,"p",40),i()()(),a(119,"app-card",43),x(120,"app-data-table",44),i(),a(121,"app-card",45)(122,"div",46)(123,"div",47)(124,"p",48),p(125),i(),a(126,"button",49),T("click",function(){return t.clearFilters()}),p(127," Clear filters "),i()(),a(128,"div",50)(129,"table",51)(130,"thead",52)(131,"tr"),S(132,Ae,8,2,"th",53,P),i(),a(134,"tr",54),S(135,Ne,2,3,"th",55,P),i()(),a(137,"tbody",56),S(138,Me,3,0,"tr",57,t.trackByRecord,!0,Fe,3,1,"tr"),i()()()()()()),r&2&&(s(6),w(t.isLoading()?6:-1),s(),w(t.error()?7:-1),s(3),_(t.rangeOptions),s(3),D("value",t.customStart()||""),s(3),D("value",t.customEnd()||""),s(),D("disabled",!t.isCustomRangeValid()),s(9),c(" ",f(27,47,t.totalDrops())," "),s(3),c(" Multi drops: ",f(30,49,t.multiDrops())," "),s(3),c(" Heavy drops: ",f(33,51,t.heavyDrops())," "),s(3),c(" Walkup drops: ",f(36,53,t.walkupDropCount())," "),s(3),c(" Double drops: ",f(39,55,t.doubleDropCount())," "),s(3),V(" Avg drops/day : ",f(42,57,t.totalDrops()/t.dailyTotals())," Day Count : ",f(43,59,t.dailyTotals())," "),s(12),c(" ",f(54,61,t.activeEmployee())," "),s(11),c(" ",f(65,63,t.totalAmount())," "),s(3),c(" Avg Sales/day : ",f(68,65,t.totalAmount()/t.dailyTotals())," "),s(11),c(" ",f(79,67,t.heavyDrops())," "),s(3),c(" Average / shift: ",N(82,69,t.recordsCount()?t.heavyDrops()/t.recordsCount():0,"1.0-1")," "),s(11),c(" ",J(93,72,t.totalAmount()-86*t.activeEmployee()*t.dailyTotals(),"SGD ","symbol","1.0-0")," "),s(3),c(" Records: ",t.recordsCount()," "),s(5),D("chartData",t.lineChartData())("chartOptions",t.lineChartOptions)("chartType",t.lineChartType),s(),D("chartData",t.dailyTrendsChartData())("chartOptions",t.dailyTrendsChartOptions)("chartType",t.dailyTrendsChartType),s(8),D("chartData",t.dropsPerEmployeeChartData())("chartOptions",t.dropsPerEmployeeChartOptions)("chartType",t.dropsPerEmployeeChartType),s(),D("chartData",t.dropTypeChartData())("chartOptions",t.dropTypeChartOptions)("chartType",t.dropTypeChartType),s(),D("chartData",t.averageDropsTrendChartData())("chartOptions",t.averageDropsTrendChartOptions)("chartType",t.averageDropsTrendChartType),s(3),w(t.topPerformer()?114:115),s(2),D("subtitle","Average drops per shift below "+t.underperformerThreshold),s(),w(t.underperformingEmployees().length?117:118),s(3),D("columns",t.groupedTableColumns)("data",t.groupedDataSignal)("pagination",!0)("pageSize",t.groupedTablePageSize)("showToolbar",!1)("showFilters",!0)("searchable",!1),s(5),V(" Showing ",t.filteredTableData().length," of ",t.recordsCount()," records "),s(7),_(t.tableColumns),s(3),_(t.tableColumns),s(3),_(t.filteredTableData()))},dependencies:[re,ee,te,K,ae,ie,oe],encapsulation:2})}return l})()});Be();export{Ge as DashboardComponent};
