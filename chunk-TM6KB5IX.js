import{b as J,d as se}from"./chunk-OCP6ILJ3.js";import{a as re,b as de}from"./chunk-CRRLMRTS.js";import{b as K,d as U,f as X,j as Y,k as Z,l as ee,n as te,p as ne,q as ae,r as pe}from"./chunk-SZIHL77V.js";import{a as ie,b as ce,c as A,d as oe}from"./chunk-5HYCXBJG.js";import{$ as m,$a as D,Ba as o,Ka as T,Kb as y,Lb as L,Nb as I,Oa as _,Va as C,Wa as z,Ya as j,_ as Q,_a as d,aa as h,ab as S,bb as s,bc as W,cb as r,db as N,gb as b,hb as g,ib as c,ic as H,jb as M,kb as F,la as w,mb as P,nb as $,oa as u,ob as q,qb as f,rb as G,sb as V,vb as k,wb as E,xb as O}from"./chunk-ZWOVSD7C.js";import{a as x,b as v,d as B}from"./chunk-3A3XYTID.js";function _e(n,l){n&1&&(s(0,"div",2),F(1),r())}var he,ue,Ce,je,ge=B(()=>{"use strict";I();H();se();oe();I();he=["chartCanvas"],ue=[[["","footer",""]]],Ce=["[footer]"];je=(()=>{class n{title;subtitle;chartData;chartOptions;chartType="line";height="400px";showLegend=!1;footer=!1;responsive=!0;maintainAspectRatio=!1;chartCanvas;chart;mergedOptions=y(()=>v(x({},this.chartOptions),{responsive:this.responsive,maintainAspectRatio:this.maintainAspectRatio,plugins:v(x({},this.chartOptions?.plugins),{legend:v(x({},this.chartOptions?.plugins?.legend),{display:this.showLegend})})}));constructor(){L(()=>{this.chart&&this.chartData&&(this.updateChartData(),this.updateChartOptions())})}containerClasses(){return`relative ${this.responsive?"w-full":""}`}ngAfterViewInit(){this.chartCanvas&&this.createChart()}ngOnChanges(e){this.chart?e.chartType?(this.destroyChart(),this.createChart()):e.chartData?this.updateChartData():e.chartOptions&&this.updateChartOptions():e.chartData&&this.chartCanvas&&this.chartData&&this.createChart()}ngOnDestroy(){this.destroyChart()}createChart(){if(!this.chartCanvas)return;let e=this.chartData||{labels:[],datasets:[]},i=this.chartCanvas.nativeElement.getContext("2d");if(!i)return;let t={type:this.chartType,data:e,options:this.mergedOptions()};this.chart=new J(i,t)}updateChartData(){!this.chart||!this.chartData||(this.chart.data=this.chartData,this.chart.update())}updateChartOptions(){this.chart&&(this.chart.options=this.mergedOptions(),this.chart.update())}destroyChart(){this.chart&&(this.chart.destroy(),this.chart=void 0)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=T({type:n,selectors:[["app-chart-wrapper"]],viewQuery:function(i,t){if(i&1&&P(he,5),i&2){let a;$(a=q())&&(t.chartCanvas=a.first)}},inputs:{title:"title",subtitle:"subtitle",chartData:"chartData",chartOptions:"chartOptions",chartType:"chartType",height:"height",showLegend:"showLegend",footer:"footer",responsive:"responsive",maintainAspectRatio:"maintainAspectRatio"},features:[Q],ngContentSelectors:Ce,decls:5,vars:7,consts:[["chartCanvas",""],[3,"title","subtitle"],["footer",""]],template:function(i,t){i&1&&(M(ue),s(0,"app-card",1)(1,"div"),N(2,"canvas",null,0),r(),_(4,_e,2,0,"div",2),r()),i&2&&(C("title",t.title)("subtitle",t.subtitle),o(),j(t.containerClasses()),z("height",t.height),o(3),d(t.footer?4:-1))},dependencies:[W,A],encapsulation:2})}return n})()});function we(n,l){if(n&1){let e=b();s(0,"div",6)(1,"app-form-field")(2,"input",9),O("ngModelChange",function(t){m(e);let a=c(2);return E(a.searchQuery,t)||(a.searchQuery=t),h(t)}),g("ngModelChange",function(){m(e);let t=c(2);return h(t.onSearchChange())}),r()()()}if(n&2){let e=c(2);o(2),k("ngModel",e.searchQuery)}}function Te(n,l){if(n&1&&(s(0,"div",7),f(1),r()),n&2){let e=c(2);o(),V(" ",e.selectedRows().length," selected ")}}function De(n,l){if(n&1&&(s(0,"div",1)(1,"div",5),_(2,we,3,1,"div",6)(3,Te,2,1,"div",7),r(),s(4,"div",8),F(5),r()()),n&2){let e=c();o(2),d(e.searchable?2:-1),o(),d(e.selectable?3:-1)}}function Se(n,l){if(n&1&&(s(0,"option",16),f(1),r()),n&2){let e=l.$implicit;C("value",e.value),o(),G(e.label)}}function Me(n,l){if(n&1){let e=b();s(0,"select",14),O("ngModelChange",function(t){m(e);let a=c().$implicit,p=c(2);return E(p.filters()[a.key],t)||(p.filters()[a.key]=t),h(t)}),g("ngModelChange",function(){m(e);let t=c(3);return h(t.onFilterChange())}),s(1,"option",15),f(2,"All"),r(),D(3,Se,2,2,"option",16,xe),r()}if(n&2){let e=c().$implicit,i=c(2);k("ngModel",i.filters()[e.key]),o(3),S(e.filterOptions)}}function Fe(n,l){if(n&1){let e=b();s(0,"input",17),O("ngModelChange",function(t){m(e);let a=c().$implicit,p=c(2);return E(p.filters()[a.key],t)||(p.filters()[a.key]=t),h(t)}),g("ngModelChange",function(){m(e);let t=c(3);return h(t.onFilterChange())}),r()}if(n&2){let e=c().$implicit,i=c(2);k("ngModel",i.filters()[e.key]),C("placeholder","Filter by "+e.label)}}function Ve(n,l){if(n&1&&(s(0,"div",10)(1,"app-form-field",11),_(2,Me,5,1,"select",12)(3,Fe,1,2,"input",13),r()()),n&2){let e=l.$implicit;o(),C("label",e.label),o(),d(e.filterType==="select"&&e.filterOptions?2:3)}}function ke(n,l){if(n&1&&(s(0,"div",2),D(1,Ve,4,2,"div",10,be),r()),n&2){let e=c();o(),S(e.filterableColumns())}}function Ee(n,l){if(n&1){let e=b();s(0,"app-button",21),g("onClick",function(){let t=m(e).$implicit,a=c(2);return h(a.handleAction(t))}),f(1),r()}if(n&2){let e=l.$implicit;C("variant",e.variant||"secondary"),o(),V(" ",e.label," ")}}function Oe(n,l){if(n&1&&(s(0,"div",4)(1,"span",18),f(2),r(),s(3,"div",19),D(4,Ee,2,2,"app-button",20,ve),r()()),n&2){let e=c();o(2),V(" ",e.selectedRows().length," item(s) selected "),o(2),S(e.actions)}}var fe,ye,be,xe,ve,et,Le=B(()=>{"use strict";I();H();ne();de();ce();pe();oe();I();ne();fe=[[["","toolbar",""]]],ye=["[toolbar]"],be=(n,l)=>l.key,xe=(n,l)=>l.value,ve=(n,l)=>l.label;et=(()=>{class n{columns=[];data=u([]);pagination=!0;pageSize=u(10);totalItems=u(0);emptyMessage="No data available";ariaLabel="Data table";trackByFn=e=>e;searchable=!0;showToolbar=!0;showFilters=!1;selectable=!1;actions;rowSelect=w();sortChange=w();pageChange=w();searchQuery=u("");filters=u({});selectedRows=u([]);filterableColumns=y(()=>this.columns.filter(e=>e.filterable));tableColumns=y(()=>this.columns.map(e=>({key:e.key,label:e.label,sortable:e.sortable,render:e.render})));filteredData=y(()=>{let e=this.data(),i=this.searchQuery().toLowerCase();i&&(e=e.filter(a=>this.columns.some(p=>{let R=this.getCellValue(a,p);return String(R).toLowerCase().includes(i)})));let t=this.filters();return Object.keys(t).forEach(a=>{let p=t[a];p&&(e=e.filter(R=>{let le=R[a];return String(le).toLowerCase().includes(String(p).toLowerCase())}))}),e});filteredDataSignal=u([]);constructor(){L(()=>{let e=this.filteredData();this.filteredDataSignal.set(e)})}onSearchChange(){}onFilterChange(){}onSortChange(e){this.sortChange.emit(e)}onPageChange(e){this.pageChange.emit(e)}handleAction(e){this.selectedRows().forEach(i=>{(!e.show||e.show(i))&&e.onClick(i)})}getCellValue(e,i){return i.render?i.render(e):e[i.key]||""}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=T({type:n,selectors:[["app-data-table"]],inputs:{columns:"columns",data:"data",pagination:"pagination",pageSize:"pageSize",totalItems:"totalItems",emptyMessage:"emptyMessage",ariaLabel:"ariaLabel",trackByFn:"trackByFn",searchable:"searchable",showToolbar:"showToolbar",showFilters:"showFilters",selectable:"selectable",actions:"actions"},outputs:{rowSelect:"rowSelect",sortChange:"sortChange",pageChange:"pageChange"},ngContentSelectors:ye,decls:6,vars:11,consts:[[1,"space-y-4"],[1,"flex","items-center","justify-between"],[1,"flex","flex-wrap","gap-4","p-4","bg-gray-50","rounded-lg","border","border-gray-200"],[3,"sortChange","pageChange","columns","data","pagination","pageSize","totalItems","emptyMessage","ariaLabel","trackByFn"],[1,"flex","items-center","gap-2","p-4","bg-primary-50","rounded-lg","border","border-primary-200"],[1,"flex","items-center","gap-4"],[1,"w-64"],[1,"text-sm","text-gray-600"],[1,"flex","items-center","gap-2"],["type","text","placeholder","Search...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"ngModelChange","ngModel"],[1,"flex-1","min-w-[200px]"],[3,"label"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"ngModel"],["type","text",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"ngModel","placeholder"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["type","text",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"ngModelChange","ngModel","placeholder"],[1,"text-sm","font-medium","text-primary-900"],[1,"flex","gap-2","ml-auto"],["size","sm",3,"variant"],["size","sm",3,"onClick","variant"]],template:function(i,t){i&1&&(M(fe),s(0,"div",0),_(1,De,6,2,"div",1)(2,ke,3,0,"div",2),s(3,"app-card")(4,"app-table",3),g("sortChange",function(p){return t.onSortChange(p)})("pageChange",function(p){return t.onPageChange(p)}),r()(),_(5,Oe,6,1,"div",4),r()),i&2&&(o(),d(t.showToolbar?1:-1),o(),d(t.showFilters&&t.filterableColumns().length>0?2:-1),o(2),C("columns",t.tableColumns())("data",t.filteredDataSignal)("pagination",t.pagination)("pageSize",t.pageSize)("totalItems",t.totalItems)("emptyMessage",t.emptyMessage)("ariaLabel",t.ariaLabel)("trackByFn",t.trackByFn),o(),d(t.actions&&t.actions.length>0&&t.selectedRows().length>0?5:-1))},dependencies:[W,te,Z,ee,K,Y,U,X,re,ie,ae,A],encapsulation:2})}return n})()});export{je as a,ge as b,et as c,Le as d};
