import{a as ie,b as ue,c as oe,d as de}from"./chunk-3VHVEV36.js";import{a as ne,b as me}from"./chunk-VKGD23XU.js";import"./chunk-OCP6ILJ3.js";import"./chunk-WQPEQQJO.js";import{a as ae,b as pe}from"./chunk-BWHYGX4V.js";import"./chunk-HPUSM2II.js";import{$ as R,$a as S,A as z,Ab as g,Ba as l,Bb as D,Cb as A,Db as q,K as le,Ka as Y,Kb as f,Nb as Q,Oa as N,T as P,Ua as V,Va as y,Xa as Z,Zb as X,_a as w,_b as K,aa as B,ab as T,ac as ee,ba as E,bb as n,bc as te,ca as k,cb as o,db as C,ga as G,gb as I,hb as _,ib as b,ic as re,oa as v,qb as p,rb as O,sb as h,tb as J}from"./chunk-77XPDUDI.js";import{a as $,b as j,d as se}from"./chunk-3A3XYTID.js";function ge(s,u){s&1&&(n(0,"div",3),p(1," Loading dashboard data\u2026 "),o())}function be(s,u){if(s&1&&(n(0,"div",4),p(1),o()),s&2){let e=b();l(),h(" ",e.error()," ")}}function fe(s,u){if(s&1){let e=I();n(0,"button",56),_("click",function(){let t=R(e).$implicit,a=b();return B(a.setRange(t.value))}),p(1),o()}if(s&2){let e=u.$implicit,r=b();Z("bg-primary-600",r.performanceRange()===e.value)("text-white",r.performanceRange()===e.value)("border-primary-600",r.performanceRange()===e.value)("border-gray-200",r.performanceRange()!==e.value)("text-gray-600",r.performanceRange()!==e.value),l(),h(" ",e.label," ")}}function ye(s,u){if(s&1&&(n(0,"div",39)(1,"div")(2,"p",57),p(3),o(),n(4,"p",40),p(5),o()(),n(6,"div",58)(7,"div")(8,"p",59),p(9,"Total Drops"),o(),n(10,"p",60),p(11),g(12,"number"),o()(),n(13,"div")(14,"p",59),p(15,"Avg / Shift"),o(),n(16,"p",60),p(17),g(18,"number"),o()()(),n(19,"p",61),p(20),g(21,"date"),o()()),s&2){let e,r,t,a,i,m=b();l(3),O((e=m.topPerformer())==null?null:e.name),l(2),h(" ",!((r=m.topPerformer())==null||r.shifts==null)&&r.shifts.length?(r=m.topPerformer())==null||r.shifts==null?null:r.shifts.join(", "):"N/A"," "),l(6),h(" ",D(12,5,(t=m.topPerformer())==null?null:t.totalDrops)," "),l(6),h(" ",A(18,7,(a=m.topPerformer())==null?null:a.averageDrops,"1.0-1")," "),l(3),h(" Latest activity: ",!((i=m.topPerformer())==null||i.latest==null)&&i.latest.Timestamp?A(21,10,(i=m.topPerformer())==null||i.latest==null?null:i.latest.Timestamp,"medium"):"N/A"," ")}}function De(s,u){s&1&&(n(0,"p",40),p(1,"No performance data available."),o())}function ve(s,u){if(s&1&&(n(0,"div",62)(1,"div",13)(2,"div")(3,"p",63),p(4),o(),n(5,"p",64),p(6),o()(),n(7,"span",65),p(8),g(9,"number"),o()(),n(10,"p",66),p(11),g(12,"number"),o()()),s&2){let e=u.$implicit;l(4),O(e.name),l(2),h(" Shifts: ",e.shifts.join(", ")||"N/A"," "),l(2),h(" ",A(9,4,e.averageDrops,"1.0-1")," avg "),l(3),h(" Total drops: ",D(12,7,e.totalDrops)," ")}}function xe(s,u){if(s&1&&(n(0,"div",42),S(1,ve,13,9,"div",62,he),o()),s&2){let e=b();l(),T(e.underperformingEmployees())}}function Ce(s,u){s&1&&(n(0,"p",40),p(1,"All employees are meeting the target."),o())}function _e(s,u){s&1&&p(0," \u2191 ")}function Se(s,u){s&1&&p(0," \u2193 ")}function Te(s,u){s&1&&p(0," \u21C5 ")}function Ee(s,u){if(s&1){let e=I();n(0,"th",51)(1,"button",67),_("click",function(){let t=R(e).$implicit,a=b();return B(a.toggleSort(t.key))}),n(2,"span"),p(3),o(),n(4,"span",68),N(5,_e,1,0)(6,Se,1,0)(7,Te,1,0),o()()()}if(s&2){let e=u.$implicit,r=b();l(3),O(e.label),l(2),w(r.getSortDirection(e.key)==="asc"?5:r.getSortDirection(e.key)==="desc"?6:7)}}function ke(s,u){if(s&1){let e=I();n(0,"th",53)(1,"input",69),_("input",function(t){let a,i=R(e).$implicit,m=b();return B(m.updateFilter(i.key,(a=t.target==null?null:t.target.value)!==null&&a!==void 0?a:""))}),o()()}if(s&2){let e=u.$implicit,r=b();l(),y("value",r.getFilterValue(e.key))("placeholder","Filter "+e.label),V("type",e.type==="number"?"number":e.type==="date"?"date":"text")}}function we(s,u){if(s&1&&(n(0,"td",70),p(1),o()),s&2){let e=u.$implicit,r=b().$implicit,t=b();l(),h(" ",t.formatCellValue(r,e)," ")}}function Ne(s,u){if(s&1&&(n(0,"tr",55),S(1,we,2,1,"td",70,L),o()),s&2){let e=b();l(),T(e.tableColumns)}}function Ae(s,u){if(s&1&&(n(0,"tr")(1,"td",71),p(2," No records match the current filters. "),o()()),s&2){let e=b();l(),V("colspan",e.tableColumns.length)}}var ce,L,he,Ue,Me=se(()=>{Q();re();pe();me();ue();le();de();Q();re();ce=(s,u)=>u.value,L=(s,u)=>u.key,he=(s,u)=>u.name;Ue=(()=>{class s{dashboardService=P(oe);destroyRef=P(G);isLoading=v(!1);error=v(null);dashboardData=v([]);underperformerThreshold=80;tableColumns=[{key:"Timestamp",label:"Timestamp",type:"text"},{key:"NAME",label:"Name",type:"text"},{key:"Shift",label:"Shift",type:"text"},{key:"Total Drops",label:"Total Drops",type:"number",numeric:!0},{key:"Multi Drops",label:"Multi Drops",type:"number",numeric:!0},{key:"Heavy Drops",label:"Heavy Drops",type:"number",numeric:!0},{key:"Walkup Drop Count",label:"Walkup Drops",type:"number",numeric:!0},{key:"Double Drop Count",label:"Double Drops",type:"number",numeric:!0},{key:"Amount",label:"Amount",type:"number",numeric:!0}];tableFilters=v(this.tableColumns.reduce((e,r)=>(e[r.key]="",e),{}));sortState=v(null);filteredTableData=f(()=>{let e=this.tableFilters(),r=this.sortState(),a=this.dashboardData().filter(m=>this.tableColumns.every(d=>{let c=e[d.key];if(!c)return!0;let x=m[d.key];if(x==null)return!1;if(d.type==="number"){let F=Number(c);return Number.isNaN(F)?!0:Number(x)===F}return String(x).toLowerCase().includes(c.toLowerCase())}));if(!r)return a;let i=this.tableColumns.find(m=>m.key===r.key);return[...a].sort((m,d)=>{let c=m[r.key],x=d[r.key];if(i?.numeric){let W=this.ensureNumber(c),U=this.ensureNumber(x);return r.direction==="asc"?W-U:U-W}let M=String(c??""),F=String(x??""),H=M.localeCompare(F,void 0,{sensitivity:"base",numeric:!0});return r.direction==="asc"?H:-H})});lineChartOptions={elements:{line:{tension:.5}},scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}},responsive:!0,maintainAspectRatio:!1};lineChartType="line";lineChartData=this.createLineChartData([],[]);barChartData=this.createBarChartData([],[]);barChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}};barChartType="bar";dropsPerEmployeeChartData=this.createBarChartData([],[],"Drops per Employee",{background:"rgba(147, 51, 234, 0.8)",border:"rgba(147, 51, 234, 1)"});dropsPerEmployeeChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}};dropsPerEmployeeChartType="bar";dropTypeChartData=this.createPieChartData([],[]);dropTypeChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}};dropTypeChartType="pie";averageDropsTrendChartData=this.createLineChartData([],[],"Average Drops per Employee");averageDropsTrendChartOptions;averageDropsTrendChartType="line";totalDrops=f(()=>this.sumNumeric(this.dashboardData(),"Total Drops"));multiDrops=f(()=>this.sumNumeric(this.dashboardData(),"Multi Drops"));heavyDrops=f(()=>this.sumNumeric(this.dashboardData(),"Heavy Drops"));walkupDropCount=f(()=>this.sumNumeric(this.dashboardData(),"Walkup Drop Count"));totalAmount=f(()=>this.sumNumeric(this.dashboardData(),"Amount"));doubleDropCount=f(()=>this.sumNumeric(this.dashboardData(),"Double Drop Count"));recordsCount=f(()=>this.dashboardData().length);recentActivities=f(()=>this.dashboardData().slice(0,5).map((r,t)=>({id:r.Timestamp||r.FIN||r["Email Address"]||`${t}`,user:r.NAME?.trim()||"Unknown driver",action:`${this.ensureNumber(r["Total Drops"])} drops \u2022 Shift ${r.Shift||"N/A"}`,time:this.formatTimestamp(r.Timestamp||r.DATE)})));constructor(){this.averageDropsTrendChartOptions={elements:{line:{tension:.5}},scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}},responsive:!0,maintainAspectRatio:!1}}topPerformer=f(()=>{let e=this.dashboardData();if(!e.length)return null;let r=Array.from(this.aggregateByEmployee(e).entries());if(!r.length)return null;let[t,a]=r.reduce((m,d)=>d[1].totalDrops>m[1].totalDrops?d:m,r[0]),i=a.count>0?a.totalDrops/a.count:0;return{name:t,totalDrops:a.totalDrops,averageDrops:i,shifts:Array.from(a.shifts),latest:a.latestRecord}});underperformingEmployees=f(()=>{let e=this.dashboardData();if(!e.length)return[];let r=this.aggregateByEmployee(e);return Array.from(r.entries()).map(([t,a])=>{let i=a.count>0?a.totalDrops/a.count:0;return{name:t,averageDrops:i,totalDrops:a.totalDrops,shifts:Array.from(a.shifts)}}).filter(t=>t.averageDrops<this.underperformerThreshold).sort((t,a)=>t.averageDrops-a.averageDrops)});ngOnInit(){this.loadDashboardData()}loadDashboardData(e){this.isLoading.set(!0),this.error.set(null),this.dashboardService.getDashboardData(e).pipe(ie(this.destroyRef),z(()=>this.isLoading.set(!1))).subscribe({next:r=>{this.dashboardData.set(this.convertSheetToJson(r)),this.updateCharts(this.dashboardData())},error:r=>{this.error.set(this.extractErrorMessage(r)),this.dashboardData.set([]),this.updateCharts([])}})}convertSheetToJson(e){let r=e&&Array.isArray(e.values)?e.values:[];if(r.length===0)return[];let t=r[0].map(i=>i?String(i).trim():"");return r.slice(1).map(i=>{let m={};return t.forEach((d,c)=>{i[c]!==void 0&&i[c]!==null&&String(i[c]).trim()!==""&&(m[d||`col_${c+1}`]=i[c]!==void 0?i[c]:"")}),m})}updateCharts(e){if(!e.length){this.lineChartData=this.createLineChartData([],[]),this.barChartData=this.createBarChartData([],[]);return}let r=this.groupAndSum(e,a=>a.Month||this.tryGetMonthFromDate(a.DATE));this.lineChartData=this.createLineChartData(r.labels,r.values);let t=this.groupAndSum(e,a=>a.Shift||"Unassigned","Walkup Drop Count");this.barChartData=this.createBarChartData(t.labels,t.values,"Walkup Drops",{background:"rgba(59, 130, 246, 0.8)",border:"rgba(59, 130, 246, 1)"}),this.updateOperationsCharts(e)}createLineChartData(e,r,t="Total Drops",a={background:"rgba(59, 130, 246, 0.1)",border:"rgba(59, 130, 246, 1)"}){return{datasets:[{data:r,label:t,backgroundColor:a.background,borderColor:a.border,pointBackgroundColor:a.border,pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:a.border,fill:"origin"}],labels:e}}createBarChartData(e,r,t="Walkup Drops",a={background:"rgba(59, 130, 246, 0.8)",border:"rgba(59, 130, 246, 1)"}){return{labels:e,datasets:[{data:r,label:t,backgroundColor:a.background,borderColor:a.border,borderWidth:1}]}}createPieChartData(e,r,t=[]){return{labels:e,datasets:[{data:r,backgroundColor:t.length>0?t:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:"#fff",borderWidth:1}]}}sumNumeric(e,r){return e.reduce((t,a)=>{let i=a[r],m=this.ensureNumber(i);return t+m},0)}groupAndSum(e,r,t="Total Drops"){let a=new Map;e.forEach(d=>{let c=r(d)||"Unknown",M=(a.get(c)??0)+this.ensureNumber(d[t]);a.set(c,M)});let i=Array.from(a.keys()),m=i.map(d=>a.get(d)??0);return{labels:i,values:m}}ensureNumber(e){if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()==="")return 0;let r=Number(e);return Number.isFinite(r)?r:0}tryGetMonthFromDate(e){if(!e)return"Unknown";let r=new Date(e);return Number.isNaN(r.getTime())?e:r.toLocaleString(void 0,{month:"short",year:"numeric"})}formatTimestamp(e){if(!e)return"Unknown time";let r=new Date(e);return Number.isNaN(r.getTime())?e:r.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}extractErrorMessage(e){return e instanceof Error||e&&typeof e=="object"&&"message"in e&&typeof e.message=="string"?e.message:"Unable to load dashboard data. Please try again later."}updateFilter(e,r){this.tableFilters.update(t=>j($({},t),{[e]:r}))}clearFilters(){this.tableFilters.set(this.tableColumns.reduce((e,r)=>(e[r.key]="",e),{}))}toggleSort(e){this.sortState.update(r=>!r||r.key!==e?{key:e,direction:"asc"}:r.direction==="asc"?{key:e,direction:"desc"}:null)}getSortDirection(e){return this.sortState()?.key===e?this.sortState().direction:null}getFilterValue(e){return this.tableFilters()[e]??""}formatCellValue(e,r){let t=e[r.key];return t==null?"\u2014":r.key==="Amount"?new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",maximumFractionDigits:0}).format(this.ensureNumber(t)):r.key==="Timestamp"?this.formatTimestamp(String(t)):String(t)}trackByRecord=(e,r)=>r.Timestamp||r.FIN||e;updateOperationsCharts(e){if(!e.length){this.dropsPerEmployeeChartData=this.createBarChartData([],[],"Drops per Employee",{background:"rgba(147, 51, 234, 0.8)",border:"rgba(147, 51, 234, 1)"}),this.dropTypeChartData=this.createPieChartData([],[]),this.averageDropsTrendChartData=this.createLineChartData([],[],"Average Drops per Employee");return}let r=this.groupAndSum(e,i=>i.NAME?.trim()||"Unknown","Total Drops");this.dropsPerEmployeeChartData=this.createBarChartData(r.labels,r.values,"Drops per Employee",{background:"rgba(147, 51, 234, 0.8)",border:"rgba(147, 51, 234, 1)"});let t=[{label:"Multi Drops",value:this.sumNumeric(e,"Multi Drops")},{label:"Heavy Drops",value:this.sumNumeric(e,"Heavy Drops")},{label:"Walkup Drops",value:this.sumNumeric(e,"Walkup Drop Count")},{label:"Double Drops",value:this.sumNumeric(e,"Double Drop Count")},{label:"Single Drops",value:this.sumNumeric(e,"Total Drops")-this.sumNumeric(e,"Multi Drops")-this.sumNumeric(e,"Heavy Drops")-this.sumNumeric(e,"Walkup Drop Count")-this.sumNumeric(e,"Double Drop Count")}];this.dropTypeChartData=this.createPieChartData(t.map(i=>i.label),t.map(i=>i.value),["rgba(59, 130, 246, 0.8)","rgba(126, 156, 146, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(27, 244, 172, 0.9)"]);let a=this.groupMonthlyAverages(e);this.averageDropsTrendChartData=this.createLineChartData(a.labels,a.values,"Average Drops per Employee",{background:"rgba(34, 197, 94, 0.15)",border:"rgba(34, 197, 94, 1)"})}groupMonthlyAverages(e){let r=new Map;e.forEach(i=>{let d=i.Month||this.tryGetMonthFromDate(i.DATE)||"Unknown",c=r.get(d)??{totalDrops:0,employees:new Set};c.totalDrops+=this.ensureNumber(i["Total Drops"]),c.employees.add(i.NAME?.trim()||"Unknown"),r.set(d,c)});let t=Array.from(r.keys()),a=t.map(i=>{let m=r.get(i);if(!m)return 0;let d=m.employees.size||1;return m.totalDrops/d});return{labels:t,values:a}}aggregateByEmployee(e){let r=new Map;return e.forEach(t=>{let a=t.NAME?.trim()||"Unknown",i=r.get(a)??{totalDrops:0,multiDrops:0,heavyDrops:0,walkupDrops:0,amount:0,count:0,shifts:new Set,latestRecord:t};i.totalDrops+=this.ensureNumber(t["Total Drops"]),i.multiDrops+=this.ensureNumber(t["Multi Drops"]),i.heavyDrops+=this.ensureNumber(t["Heavy Drops"]),i.walkupDrops+=this.ensureNumber(t["Walkup Drop Count"]),i.amount+=this.ensureNumber(t.Amount),i.count+=1,t.Shift&&i.shifts.add(t.Shift),i.latestRecord=t,r.set(a,i)}),r}performanceRange=v("month");customStart=v(null);customEnd=v(null);rangeOptions=[{label:"Today",value:"today"},{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"This Year",value:"year"}];filteredRecords=f(()=>{let e=this.dashboardData(),r=this.performanceRange(),t=this.customStart(),a=this.customEnd(),{startDate:i,endDate:m}=this.getRangeBounds(r,t,a);return console.log("Filtering Records:",{range:r,customStart:t,customEnd:a,startDate:i,endDate:m}),!i&&!m?e:e.filter(d=>{let c=this.parseRecordDate(d);return console.log("Record:",d,{recordDate:c,startDate:i,endDate:m}),!(!c||i&&c<i||m&&c>m)})});getRangeBounds(e,r,t){let a=new Date,i=new Date(a.getFullYear(),a.getMonth(),a.getDate());switch(e){case"today":return{startDate:i,endDate:new Date(i.getTime()+24*60*60*1e3-1)};case"week":{let m=new Date(i);return m.setDate(m.getDate()-6),{startDate:m,endDate:a}}case"month":return{startDate:new Date(a.getFullYear(),a.getMonth(),1),endDate:a};case"year":return{startDate:new Date(a.getFullYear(),0,1),endDate:a};case"custom":{let m=r?new Date(r):null,d=t?new Date(t):null;return{startDate:m,endDate:d}}default:return{startDate:null,endDate:null}}}parseRecordDate(e){let r=e.DATE||e.Timestamp;if(!r)return null;let t=new Date(r);return Number.isNaN(t.getTime())?null:t}applyCustomRange(){this.isCustomRangeValid()&&this.performanceRange.set("custom")}isCustomRangeValid=f(()=>{let e=this.customStart(),r=this.customEnd();if(!e||!r)return!1;let t=new Date(e),a=new Date(r);return t<=a});setRange(e){this.performanceRange.set(e),e!=="custom"&&(this.customStart.set(null),this.customEnd.set(null))}updateCustomStart(e){this.customStart.set(e||null)}updateCustomEnd(e){this.customEnd.set(e||null)}static \u0275fac=function(r){return new(r||s)};static \u0275cmp=Y({type:s,selectors:[["app-dashboard"]],decls:132,vars:61,consts:[[1,"space-y-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"rounded-md","border","border-primary-200","bg-primary-50","px-4","py-3","text-sm","text-primary-800"],[1,"rounded-md","border","border-red-200","bg-red-50","px-4","py-3","text-sm","text-red-700"],[1,"flex","flex-col","gap-3","lg:flex-row","lg:items-center","lg:justify-between"],[1,"flex","flex-wrap","gap-2"],["type","button",1,"rounded-full","border","px-4","py-1.5","text-sm","font-medium","transition","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"bg-primary-600","text-white","border-primary-600","border-gray-200","text-gray-600"],[1,"flex","flex-wrap","items-center","gap-2"],["type","date",1,"rounded-md","border","border-gray-300","px-3","py-1.5","text-sm","focus:border-primary-500","focus:outline-none","focus:ring-2","focus:ring-primary-200",3,"change","value"],[1,"text-sm","text-gray-400"],["type","button",1,"rounded-md","bg-primary-600","px-4","py-1.5","text-sm","font-medium","text-white","transition","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-primary-500","disabled:bg-gray-300","disabled:text-gray-500",3,"click","disabled"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-500"],[1,"mt-1","text-2xl","font-semibold","text-gray-900"],[1,"mt-1","text-xs","text-gray-500"],[1,"p-3","bg-primary-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-primary-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"],[1,"p-3","bg-green-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"p-3","bg-yellow-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"],[1,"p-3","bg-purple-100","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],["title","Monthly Drops","subtitle","Aggregated by month","height","256px",3,"chartData","chartOptions","chartType"],["title","Walkup Drops by Shift","subtitle","Latest reporting period","height","256px",3,"chartData","chartOptions","chartType"],[1,"text-xl","font-semibold","text-gray-900"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-6"],["title","Drops per Employee","subtitle","Total drops by team member","height","256px",3,"chartData","chartOptions","chartType"],["title","Drop Type Distribution","subtitle","Share of drop categories","height","256px",3,"chartData","chartOptions","chartType"],["title","Average Drops per Employee","subtitle","Monthly average trend","height","256px",3,"chartData","chartOptions","chartType"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["title","Top Performer","subtitle","Highest total drops across all shifts"],[1,"space-y-2"],[1,"text-sm","text-gray-500"],["title","Underperforming Employees","padding","sm",3,"subtitle"],[1,"space-y-3"],["title","Drop Records","subtitle","Filter each column or sort to analyse individual drop performance","padding","sm"],[1,"flex","flex-col","gap-4"],[1,"flex","flex-wrap","items-center","justify-between","gap-3"],[1,"text-sm","text-gray-600"],["type","button",1,"inline-flex","items-center","gap-2","rounded-md","border","border-gray-300","bg-white","px-3","py-1.5","text-sm","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"click"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-4","py-3","text-left","text-xs","font-semibold","uppercase","tracking-wider","text-gray-500"],[1,"bg-white"],[1,"px-4","py-2"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],["type","button",1,"rounded-full","border","px-4","py-1.5","text-sm","font-medium","transition","focus:outline-none","focus:ring-2","focus:ring-primary-500",3,"click"],[1,"text-lg","font-semibold","text-gray-900"],[1,"grid","grid-cols-2","gap-4","text-sm"],[1,"text-gray-500"],[1,"font-semibold","text-gray-900"],[1,"text-xs","text-gray-400"],[1,"rounded-md","border","border-red-100","bg-red-50","px-4","py-3"],[1,"font-semibold","text-red-700"],[1,"text-xs","text-red-500"],[1,"text-sm","font-medium","text-red-600"],[1,"mt-1","text-xs","text-red-500"],["type","button",1,"flex","items-center","gap-2","text-left","hover:text-primary-600","focus:outline-none",3,"click"],[1,"text-gray-400"],[1,"w-full","rounded-md","border","border-gray-300","px-2","py-1","text-sm","focus:border-primary-500","focus:outline-none","focus:ring-2","focus:ring-primary-200",3,"input","value","placeholder"],[1,"px-4","py-3","text-sm","text-gray-900"],[1,"px-4","py-6","text-center","text-sm","text-gray-500"]],template:function(r,t){r&1&&(n(0,"div",0)(1,"div")(2,"h1",1),p(3,"Dashboard"),o(),n(4,"p",2),p(5,"Welcome back! Here's what's happening today."),o()(),N(6,ge,2,0,"div",3)(7,be,2,1,"div",4),n(8,"div",5)(9,"div",6),S(10,fe,2,11,"button",7,ce),o(),n(12,"div",8)(13,"input",9),_("change",function(i){return t.updateCustomStart((i.target==null?null:i.target.value)||"")}),o(),n(14,"span",10),p(15,"to"),o(),n(16,"input",9),_("change",function(i){return t.updateCustomEnd((i.target==null?null:i.target.value)||"")}),o(),n(17,"button",11),_("click",function(){return t.applyCustomRange()}),p(18," Apply "),o()()(),n(19,"div",12)(20,"app-card")(21,"div",13)(22,"div")(23,"p",14),p(24,"Total Drops"),o(),n(25,"p",15),p(26),g(27,"number"),o(),n(28,"p",16),p(29),g(30,"number"),o(),n(31,"p",16),p(32),g(33,"number"),o(),n(34,"p",16),p(35),g(36,"number"),o(),n(37,"p",16),p(38),g(39,"number"),o()(),n(40,"div",17),E(),n(41,"svg",18),C(42,"path",19),o()()()(),k(),n(43,"app-card")(44,"div",13)(45,"div")(46,"p",14),p(47,"Active Employees"),o(),n(48,"p",15),p(49),g(50,"number"),o()(),n(51,"div",20),E(),n(52,"svg",21),C(53,"path",22),o()()()(),k(),n(54,"app-card")(55,"div",13)(56,"div")(57,"p",14),p(58,"Cash Balance"),o(),n(59,"p",15),p(60),g(61,"number"),o()(),n(62,"div",20),E(),n(63,"svg",21),C(64,"path",22),o()()()(),k(),n(65,"app-card")(66,"div",13)(67,"div")(68,"p",14),p(69,"Outstanding Invoices"),o(),n(70,"p",15),p(71),g(72,"number"),o(),n(73,"p",16),p(74),g(75,"number"),o()(),n(76,"div",23),E(),n(77,"svg",24),C(78,"path",25),o()()()(),k(),n(79,"app-card")(80,"div",13)(81,"div")(82,"p",14),p(83,"Total Revenue"),o(),n(84,"p",15),p(85),g(86,"currency"),o(),n(87,"p",16),p(88),o()(),n(89,"div",26),E(),n(90,"svg",27),C(91,"path",28),o()()()()(),k(),n(92,"div",29),C(93,"app-chart-wrapper",30)(94,"app-chart-wrapper",31),o(),n(95,"div",0)(96,"div")(97,"h2",32),p(98,"Operations"),o(),n(99,"p",2),p(100," Monitor drops performance across your team, spot top performers, and identify coaching opportunities. "),o()(),n(101,"div",33),C(102,"app-chart-wrapper",34)(103,"app-chart-wrapper",35)(104,"app-chart-wrapper",36),o(),n(105,"div",37)(106,"app-card",38),N(107,ye,22,13,"div",39)(108,De,2,0,"p",40),o(),n(109,"app-card",41),N(110,xe,3,0,"div",42)(111,Ce,2,0,"p",40),o()()(),n(112,"app-card",43)(113,"div",44)(114,"div",45)(115,"p",46),p(116),o(),n(117,"button",47),_("click",function(){return t.clearFilters()}),p(118," Clear filters "),o()(),n(119,"div",48)(120,"table",49)(121,"thead",50)(122,"tr"),S(123,Ee,8,2,"th",51,L),o(),n(125,"tr",52),S(126,ke,2,3,"th",53,L),o()(),n(128,"tbody",54),S(129,Ne,3,0,"tr",55,t.trackByRecord,!0,Ae,3,1,"tr"),o()()()()()()),r&2&&(l(6),w(t.isLoading()?6:-1),l(),w(t.error()?7:-1),l(3),T(t.rangeOptions),l(3),y("value",t.customStart()||""),l(3),y("value",t.customEnd()||""),l(),y("disabled",!t.isCustomRangeValid()),l(9),h(" ",D(27,37,t.totalDrops())," "),l(3),h(" Multi drops: ",D(30,39,t.multiDrops())," "),l(3),h(" Heavy drops: ",D(33,41,t.heavyDrops())," "),l(3),h(" Walkup drops: ",D(36,43,t.walkupDropCount())," "),l(3),h(" Double drops: ",D(39,45,t.doubleDropCount())," "),l(11),h(" ",D(50,47,t.multiDrops())," "),l(11),h(" ",D(61,49,t.multiDrops())," "),l(11),h(" ",D(72,51,t.heavyDrops())," "),l(3),h(" Average / shift: ",A(75,53,t.recordsCount()?t.heavyDrops()/t.recordsCount():0,"1.0-1")," "),l(11),h(" ",q(86,56,t.totalAmount(),"SGD","symbol","1.0-0")," "),l(3),h(" Records: ",t.recordsCount()," "),l(5),y("chartData",t.lineChartData)("chartOptions",t.lineChartOptions)("chartType",t.lineChartType),l(),y("chartData",t.barChartData)("chartOptions",t.barChartOptions)("chartType",t.barChartType),l(8),y("chartData",t.dropsPerEmployeeChartData)("chartOptions",t.dropsPerEmployeeChartOptions)("chartType",t.dropsPerEmployeeChartType),l(),y("chartData",t.dropTypeChartData)("chartOptions",t.dropTypeChartOptions)("chartType",t.dropTypeChartType),l(),y("chartData",t.averageDropsTrendChartData)("chartOptions",t.averageDropsTrendChartOptions)("chartType",t.averageDropsTrendChartType),l(3),w(t.topPerformer()?107:108),l(2),y("subtitle","Average drops per shift below "+t.underperformerThreshold),l(),w(t.underperformingEmployees().length?110:111),l(6),J(" Showing ",t.filteredTableData().length," of ",t.recordsCount()," records "),l(7),T(t.tableColumns),l(3),T(t.tableColumns),l(3),T(t.filteredTableData()))},dependencies:[te,K,ee,X,ae,ne],encapsulation:2})}return s})()});Me();export{Ue as DashboardComponent};
